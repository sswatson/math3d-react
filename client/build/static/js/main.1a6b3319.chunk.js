(this["webpackJsonpmath3d-react"]=this["webpackJsonpmath3d-react"]||[]).push([[0],{374:function(e,t,n){e.exports=n(940)},793:function(e,t,n){},807:function(e,t){},809:function(e,t){},819:function(e,t){},821:function(e,t){},849:function(e,t){},850:function(e,t){},939:function(e,t){},940:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(53),o=n(2),s=n(45),c=n(164),l=n.n(c),u=n(17),d=n(227),p=n.n(d),h=n(3),f=n(4),m=n(20),v=n(6),b=n(5),y=n(8),g=n(7),O=n(30),E=n(345),j=n.n(E);function x(e,t){var n=j()(e),r=t*(1-n.lightness()/100);return n.lighten(r).hex()}function C(){var e=Object(y.a)(["\n    opacity: 0.5;\n    cursor: not-allowed;\n  "]);return C=function(){return e},e}function w(){var e=Object(y.a)(["\n  border: none;\n  border-radius: ",";\n  transition-duration: ",";\n  transition-timing-function: ",";\n  transition-property: all;\n  background-color: ","\n  ","\n  ","\n"]);return w=function(){return e},e}function k(){var e=Object(y.a)(["\n          background-color: ",";\n          transition-duration: 0.1s;\n          "]);return k=function(){return e},e}function P(){var e=Object(y.a)(["\n      background-color: ",";\n      &:hover {\n        background-color: ",";\n        ",";\n        };\n        "]);return P=function(){return e},e}function T(){var e=Object(y.a)(["\n      background-color: rgba(0,0,0,0.20);\n      transition-duration: 0.1s;\n      transform: translateY(1px);\n      "]);return T=function(){return e},e}function S(){var e=Object(y.a)(["\n  &:focus {\n    outline: none;\n    color: ",";\n  };\n  /* by default, button darkens on hover*/\n  &:hover {\n    background-color: rgba(0,0,0,0.10);\n    font-weight:900;\n    ",";\n    };\n    /* if lightenOnHover, then lighten background on hover */\n    ","\n"]);return S=function(){return e},e}var A=Object(g.b)(S(),(function(e){return e.focusColor||e.theme.primary[4]}),(function(e){return e.pressing&&Object(g.b)(T())}),(function(e){return e.lightenOnHover&&Object(g.b)(P(),(function(e){return e.backgroundColor}),(function(e){return x(e.backgroundColor,.75)}),(function(e){return e.pressing&&Object(g.b)(k(),(function(e){return x(e.backgroundColor,1)}))}))})),R=g.c.button(w(),(function(e){return e.theme.borderRadius}),(function(e){return e.theme.transitionDuration}),(function(e){return e.theme.transitionTimingFunction}),(function(e){return e.backgroundColor}),(function(e){return!e.disabled&&A}),(function(e){return e.disabled&&Object(g.b)(C())})),V=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={pressing:!1},e.getRef=function(t){e.button=t},e.endPress=function(){e.setState({pressing:!1})},e.beginPress=function(){e.button.focus(),e.setState({pressing:!0})},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.lightenOnHover,n=e.backgroundColor,r=e.focusColor,i=Object(s.a)(e,["lightenOnHover","backgroundColor","focusColor"]);if(t&&!n)throw Error("lightenOnHover requires backgroundColor to be specified.");return a.a.createElement(R,Object.assign({onPointerDown:this.beginPress,onPointerUp:this.endPress,onPointerLeave:this.endPress,lightenOnHover:t,backgroundColor:n,focusColor:r,ref:this.getRef,pressing:this.state.pressing,disabled:this.props.disabled},i))}}]),n}(r.PureComponent);function I(){var e=Object(y.a)(["\n    margin-left: -30px;\n    padding-left: 30px;\n    & > i {\n      margin-left: -30px;\n    }\n  "]);return I=function(){return e},e}function D(){var e=Object(y.a)(["\n    margin-right: -30px;\n  "]);return D=function(){return e},e}function _(){var e=Object(y.a)(["\n  z-index:200;\n  width:30px;\n  height:30px;\n  ",";\n  ",";\n}\n"]);return _=function(){return e},e}V.defaultProps={lightenOnHover:!1,disabled:!1,backgroundColor:"transparent"};var N=Object(g.c)(V)(_(),(function(e){return"right"===e.side&&Object(g.b)(D())}),(function(e){return"left"===e.side&&Object(g.b)(I())})),M={left:{true:"left",false:"right"},right:{true:"right",false:"left"}},L=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isDrawerOpen?e.onClose:e.onOpen,n=M[e.slideTo][e.isDrawerOpen];return a.a.createElement(N,{onClick:t,side:e.side},a.a.createElement(O.a,{type:n}))}}]),n}(r.PureComponent),F=n(10),z=n.n(F);function U(){var e=Object(y.a)(["\n  z-index:10;\n  width: ",";\n  position: relative;\n  background-color: ",";\n  height:100%;\n  &.closing-or-closed.left {\n    transform: ",";\n    transition-duration: ",";\n    margin-right: ",";\n  }\n  &.opening.left {\n    transform: translateX(0px);\n    transition-duration: ",";\n    margin-right: 0;\n  }\n  &.closing-or-closed.right {\n    transform: ",";\n    transition-duration: ",";\n    margin-left: ",";\n  }\n  &.opening.right {\n    transform: translateX(0px);\n    transition-duration: ",";\n    margin-right: 0;\n  }\n"]);return U=function(){return e},e}var B=g.c.div(U(),(function(e){return e.width}),(function(e){return e.theme.gray[1]}),(function(e){return"translateX(-".concat(e.width,")")}),(function(e){return e.animationSpeed}),(function(e){return"-".concat(e.width)}),(function(e){return e.animationSpeed}),(function(e){return"translateX(".concat(e.width,")")}),(function(e){return e.animationSpeed}),(function(e){return"-".concat(e.width)}),(function(e){return e.animationSpeed})),H=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).onClose=r.props.onClose.bind(Object(m.a)(r),r.props.id,r.props.animationSpeed),r.onOpen=r.props.onOpen.bind(Object(m.a)(r),r.props.id,r.props.animationSpeed),r}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.animationSpeed,n=e.width,i=e.children,o=e.isOpen,s=e.isAnimating,c=e.slideTo,l=z()({opening:o&&s,"closing-or-closed":!o,left:"left"===c,right:"right"===c}),u="left"===c?"right":"left";return a.a.createElement(r.Fragment,null,"left"===u&&o&&a.a.createElement(L,{isDrawerOpen:o,onOpen:this.onOpen,onClose:this.onClose,side:u,slideTo:c}),a.a.createElement(B,{width:n,className:l,animationSpeed:t},i),"right"===u&&a.a.createElement(L,{isDrawerOpen:o,onOpen:this.onOpen,onClose:this.onClose,side:u,slideTo:c}))}}]),n}(a.a.PureComponent);H.defaultProps={slideTo:"left",animationSpeed:"1000ms"};var G=H.defaultProps.animationSpeed,X=function(e,t){return{type:"SET_VISIBILITY",payload:{id:e,isVisible:t}}},Z=function(e,t){return{type:"SET_ANIMATION_STATUS",payload:{id:e,isAnimating:t}}},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,n=p.a.from(t);return function(t){t(X(e,!1)),t(Z(e,!0)),setTimeout((function(){return t(Z(e,!1))}),n)}},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,n=p.a.from(t);return function(t){t(X(e,!0)),t(Z(e,!0)),setTimeout((function(){return t(Z(e,!1))}),n)}},q={main:{isVisible:!0,isAnimating:!1,width:"400px"},examples:{isVisible:!1,isAnimating:!1,width:"400px"}};var J=n(165),$=function e(t,n){Object(h.a)(this,e),this.type=t,this.isError=null!==n&&void 0!==n,this.isError&&(this.errorMsg=n)},K=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,"PARSE_ERROR",e)}return n}($),Q=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,"EVAL_ERROR",e)}return n}($),ee=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,"RENDER_ERROR",e)}return n}($);function te(e,t,n){return n.isError?{type:"SET_ERROR",payload:{id:e,property:t,errorData:n}}:{type:"UNSET_ERROR",payload:{id:e,property:t,errorData:n}}}function ne(e,t,n){return{type:"TOGGLE_PROPERTY",name:t,payload:{id:e,property:n}}}function re(e,t,n,r){return{type:"SET_PROPERTY",name:t,payload:{id:e,property:n,value:r}}}function ae(e,t,n,r,a){return Object(J.batchActions)([re(e,t,n,r),te(e,n,a)],"SET_PROPERTY_AND_ERROR")}var ie={controls:{activeTab:"1"},examples:{activeTab:"1"}};var oe=n(43),se=n(23),ce=function e(t){Object(h.a)(this,e),this.reducer="mathSymbols",t.support||(t.support="full"),Object.assign(this,t)},le=n(115),ue=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).state={targetUndraggable:!1},r.onPointerDown=function(e){var t=e.target,a=r.rootRef.current;n.isDragAllowed(a,t)||r.setState({targetUndraggable:!0})},r.onPointerUp=function(){r.setState({targetUndraggable:!1})},r.rootRef=a.a.createRef(),r.onPointerDown=r.onPointerDown.bind(Object(m.a)(r)),r.onPointerUp=r.onPointerUp.bind(Object(m.a)(r)),r}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.isDragDisabled,r=(e.children,Object(s.a)(e,["id","isDragDisabled","children"])),i=this.state.targetUndraggable;return a.a.createElement("div",{onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,ref:this.rootRef},a.a.createElement(le.b,Object.assign({key:t,isDragDisabled:i||n},r),this.props.children))}}],[{key:"isElementDraggable",value:function(e){return!e.classList.contains("mq-editable-field")&&(!e.classList.contains("math3d-longpressable")&&!e.classList.contains("ant-slider"))}},{key:"isDragAllowed",value:function(e,t){return e===t||!!n.isElementDraggable(t)&&(null===t.parentElement||n.isDragAllowed(e,t.parentElement))}}]),n}(a.a.PureComponent);function de(){var e=Object(y.a)(["\n  box-shadow: ","\n"]);return de=function(){return e},e}var pe=g.c.div(de(),(function(e){return e.isDragging?"0 0 5px gray":""}));function he(e){var t=e.droppableType,n=e.draggableType,i=e.className,o=e.style,s=e.renderItem;return a.a.createElement(le.c,{droppableId:e.droppableId,isDropDisabled:e.isDropDisabled,type:t},(function(t,c){return a.a.createElement("div",{ref:t.innerRef,className:i,style:o},e.items.map((function(e,t){return function(e,t,n){return a.a.createElement(ue,Object.assign({key:e.id,draggableId:e.id,isDragDisabled:e.isDragDisabled},n),(function(n,i){return a.a.createElement(r.Fragment,null,a.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps),a.a.createElement(pe,{isDragging:i.isDragging},t(e))),n.placeholder)}))}(e,s,{index:t,type:n})})),t.placeholder)}))}var fe=n(41),me=n.n(fe),ve=n(58);function be(e){return new Promise((function(t){return setTimeout(t,e)}))}var ye=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;Object(h.a)(this,e),this.isInSlowMode=!1,this.isPointerDown=!1,this.isScrolling=!1,this.unbindEventListeners=function(){n.canvas.removeEventListener("mousedown",n.downHandler),n.canvas.removeEventListener("touchstart",n.downHandler),n.canvas.removeEventListener("mouseup",n.enterSlowMode),n.canvas.removeEventListener("touchend",n.touchExitHandler),n.canvas.removeEventListener("mousewheel",n.wheelHandler),n.canvas.removeEventListener("wheel",n.wheelHandler)},this.slowModeCycle=Object(ve.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.Loop.start(),e.next=3,be(n.slowOnTime);case 3:return n.isInSlowMode&&n.Loop.stop(),e.next=6,be(n.slowOffTime);case 6:n.isInSlowMode&&n.slowModeCycle();case 7:case"end":return e.stop()}}),e)}))),this.downHandler=function(){n.isPointerDown=!0,n.exitSlowMode()},this.mouseUpHandler=function(){n.isPointerDown=!1,n.enterSlowMode()},this.touchExitHandler=function(){var t=Object(ve.a)(me.a.mark((function t(r){return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.touches.length>0)){t.next=2;break}return t.abrupt("return");case 2:return n.isPointerDown=!1,t.next=5,be(e.scrollTime);case 5:n.enterSlowMode();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.wheelHandler=Object(ve.a)(me.a.mark((function t(){return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.exitSlowMode(),n.isScrolling=!0,t.next=4,be(e.scrollTime);case 4:n.enterSlowMode(),n.isScrolling=!1;case 6:case"end":return t.stop()}}),t)}))),this.enterSlowMode=function(){n.isInSlowMode||n.isPointerDown||n.isScrolling||(n.isInSlowMode=!0,n.slowModeCycle())},this.exitSlowMode=function(){n.isInSlowMode=!1,n.Loop.start()},this.Loop=t.Loop,this.canvas=t.canvas,this.slowOffTime=a,this.slowOnTime=r,this.canvas.addEventListener("mousedown",this.downHandler),this.canvas.addEventListener("touchstart",this.downHandler),this.canvas.addEventListener("mouseup",this.mouseUpHandler),this.canvas.addEventListener("touchend",this.touchExitHandler),this.canvas.addEventListener("mousewheel",this.wheelHandler),this.canvas.addEventListener("wheel",this.wheelHandler)};ye.scrollTime=3e3;var ge=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).mathboxNode=e.props.mathbox,e.updateSymbol=Symbol("update marker"),e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.loopManager=new ye(this.mathboxNode.three)}},{key:"componentWillUnmount",value:function(){this.loopManager.unbindEventListeners()}},{key:"componentDidUpdate",value:function(){var e=Object(ve.a)(me.a.mark((function e(){var t;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Symbol("update marker"),this.updateSymbol=t,this.loopManager.exitSlowMode(),e.next=5,be(100);case 5:this.updateSymbol===t&&this.loopManager.enterSlowMode();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.children?r.Children.map(this.props.children,(function(t){return r.cloneElement(t,{mathboxParent:e.mathboxNode,mathbox:e.mathboxNode})})):null}}]),n}(r.PureComponent),Oe=n(63),Ee=n(354),je=n.n(Ee).a.create();je.import(n(449)),je.import(n(460)),je.import(n(464)),je.import(n(467)),je.import(n(495)),je.import(n(520)),je.import(n(537)),je.import(n(544));var xe=je,Ce=8e-4,we=Ce/2,ke=function(e){var t=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n.map((function(t,r){n[r]=xe.add(t,-we);var a=e.apply(void 0,n);n[r]=xe.add(t,+we);var i=e.apply(void 0,n);return n[r]=t,xe.divide(xe.subtract(i,a),Ce)}));return 1===a.length?a[0]:a};Object.defineProperty(t,"length",{value:e.length});for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return 0===r.length?t:t.apply(void 0,r)},Pe=function(e,t){var n=xe.subtract(e(t+we),e(t-we));return xe.divide(n,xe.norm(n))},Te=function(e,t){var n=xe.subtract(Pe(e,t+we),Pe(e,t-we));return xe.divide(n,xe.norm(n))};var Se=xe.i;xe.import({diff:ke,pdiff:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.pop()-1,i=n[a];n[a]=xe.add(i,we);var o=e.apply(void 0,n);n[a]=xe.add(i,-we);var s=e.apply(void 0,n);return xe.divide(xe.subtract(o,s),Ce)},unitT:Pe,unitN:Te,unitB:function(e,t){return xe.cross(Pe(e,t),Te(e,t))},div:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=ke.apply(void 0,[e].concat(n));return xe.trace(a)},curl:function(e,t,n,r){var a=ke(e,t,n,r),i=Object(oe.a)(a,3),o=i[0],s=i[1],c=i[2];return[s[2]-c[1],c[0]-o[2],o[1]-s[0]]},i:[1,0,0],j:[0,1,0],k:[0,0,1],I:Se,arcsin:xe.asin,arccos:xe.acos,arctan:function(e,t){return void 0===t?xe.atan(e):xe.atan2(e,t)},arcsinh:xe.asinh,arccosh:xe.acosh,arctanh:xe.atanh},{override:!0});var Ae=xe;function Re(e,t){return e===t||e instanceof Array&&t instanceof Array&&(e.length===t.length&&e.every((function(e,n){return Re(e,t[n])})))}function Ve(e){return"number"===typeof e}function Ie(e){if(!Ve(e))throw TypeError("Expected value to be a real number, but it was an ".concat(typeof e))}function De(e){return!!Ve(e)||e instanceof Ae.type.Complex}function _e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.real,a=void 0===r||r;return e instanceof Array&&(e.length===t&&(a?e.every((function(e){return Ve(e)})):e.every((function(e){return De(e)}))))}function Ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.real,a=void 0===r||r;if(!_e(e,t,{real:a})){var i=a?"real ":"";throw TypeError("Expected value to be a ".concat(t,"-component ").concat(i,"vector, but it is not."))}}function Me(e,t,n){if("function"!==typeof e)throw TypeError("Expected a function, but received a ".concat(typeof e));if(e.length!==t)throw TypeError("Expected function to have ".concat(String(t)," inputs"));var r=Object(se.a)(Array(t)).map((function(){return Math.random()})),a=e.apply(void 0,Object(se.a)(r));if(1===n){if(De(a))return;throw TypeError("Expected function to return a number, but it did not.")}if(n>1){if(_e(a,n,{real:!1}))return;throw TypeError("Expected function to return a vector of length ".concat(n,", but it did not."))}}function Le(e,t,n){try{return Me(e,t,n),!0}catch(r){return!1}}window.math=xe;var Fe=n(89),ze=n.n(Fe);function Ue(e,t){var n=ze()(e,t);return Object.keys(n).reduce((function(e,t){return e[t]=new Set(n[t]),e}),{})}var Be=[[],[[0,8,3]],[[0,1,9]],[[1,8,3],[9,8,1]],[[1,2,10]],[[0,8,3],[1,2,10]],[[9,2,10],[0,2,9]],[[2,8,3],[2,10,8],[10,9,8]],[[3,11,2]],[[0,11,2],[8,11,0]],[[1,9,0],[2,3,11]],[[1,11,2],[1,9,11],[9,8,11]],[[3,10,1],[11,10,3]],[[0,10,1],[0,8,10],[8,11,10]],[[3,9,0],[3,11,9],[11,10,9]],[[9,8,10],[10,8,11]],[[4,7,8]],[[4,3,0],[7,3,4]],[[0,1,9],[8,4,7]],[[4,1,9],[4,7,1],[7,3,1]],[[1,2,10],[8,4,7]],[[3,4,7],[3,0,4],[1,2,10]],[[9,2,10],[9,0,2],[8,4,7]],[[2,10,9],[2,9,7],[2,7,3],[7,9,4]],[[8,4,7],[3,11,2]],[[11,4,7],[11,2,4],[2,0,4]],[[9,0,1],[8,4,7],[2,3,11]],[[4,7,11],[9,4,11],[9,11,2],[9,2,1]],[[3,10,1],[3,11,10],[7,8,4]],[[1,11,10],[1,4,11],[1,0,4],[7,11,4]],[[4,7,8],[9,0,11],[9,11,10],[11,0,3]],[[4,7,11],[4,11,9],[9,11,10]],[[9,5,4]],[[9,5,4],[0,8,3]],[[0,5,4],[1,5,0]],[[8,5,4],[8,3,5],[3,1,5]],[[1,2,10],[9,5,4]],[[3,0,8],[1,2,10],[4,9,5]],[[5,2,10],[5,4,2],[4,0,2]],[[2,10,5],[3,2,5],[3,5,4],[3,4,8]],[[9,5,4],[2,3,11]],[[0,11,2],[0,8,11],[4,9,5]],[[0,5,4],[0,1,5],[2,3,11]],[[2,1,5],[2,5,8],[2,8,11],[4,8,5]],[[10,3,11],[10,1,3],[9,5,4]],[[4,9,5],[0,8,1],[8,10,1],[8,11,10]],[[5,4,0],[5,0,11],[5,11,10],[11,0,3]],[[5,4,8],[5,8,10],[10,8,11]],[[9,7,8],[5,7,9]],[[9,3,0],[9,5,3],[5,7,3]],[[0,7,8],[0,1,7],[1,5,7]],[[1,5,3],[3,5,7]],[[9,7,8],[9,5,7],[10,1,2]],[[10,1,2],[9,5,0],[5,3,0],[5,7,3]],[[8,0,2],[8,2,5],[8,5,7],[10,5,2]],[[2,10,5],[2,5,3],[3,5,7]],[[7,9,5],[7,8,9],[3,11,2]],[[9,5,7],[9,7,2],[9,2,0],[2,7,11]],[[2,3,11],[0,1,8],[1,7,8],[1,5,7]],[[11,2,1],[11,1,7],[7,1,5]],[[9,5,8],[8,5,7],[10,1,3],[10,3,11]],[[5,7,0],[5,0,9],[7,11,0],[1,0,10],[11,10,0]],[[11,10,0],[11,0,3],[10,5,0],[8,0,7],[5,7,0]],[[11,10,5],[7,11,5]],[[10,6,5]],[[0,8,3],[5,10,6]],[[9,0,1],[5,10,6]],[[1,8,3],[1,9,8],[5,10,6]],[[1,6,5],[2,6,1]],[[1,6,5],[1,2,6],[3,0,8]],[[9,6,5],[9,0,6],[0,2,6]],[[5,9,8],[5,8,2],[5,2,6],[3,2,8]],[[2,3,11],[10,6,5]],[[11,0,8],[11,2,0],[10,6,5]],[[0,1,9],[2,3,11],[5,10,6]],[[5,10,6],[1,9,2],[9,11,2],[9,8,11]],[[6,3,11],[6,5,3],[5,1,3]],[[0,8,11],[0,11,5],[0,5,1],[5,11,6]],[[3,11,6],[0,3,6],[0,6,5],[0,5,9]],[[6,5,9],[6,9,11],[11,9,8]],[[5,10,6],[4,7,8]],[[4,3,0],[4,7,3],[6,5,10]],[[1,9,0],[5,10,6],[8,4,7]],[[10,6,5],[1,9,7],[1,7,3],[7,9,4]],[[6,1,2],[6,5,1],[4,7,8]],[[1,2,5],[5,2,6],[3,0,4],[3,4,7]],[[8,4,7],[9,0,5],[0,6,5],[0,2,6]],[[7,3,9],[7,9,4],[3,2,9],[5,9,6],[2,6,9]],[[3,11,2],[7,8,4],[10,6,5]],[[5,10,6],[4,7,2],[4,2,0],[2,7,11]],[[0,1,9],[4,7,8],[2,3,11],[5,10,6]],[[9,2,1],[9,11,2],[9,4,11],[7,11,4],[5,10,6]],[[8,4,7],[3,11,5],[3,5,1],[5,11,6]],[[5,1,11],[5,11,6],[1,0,11],[7,11,4],[0,4,11]],[[0,5,9],[0,6,5],[0,3,6],[11,6,3],[8,4,7]],[[6,5,9],[6,9,11],[4,7,9],[7,11,9]],[[10,4,9],[6,4,10]],[[4,10,6],[4,9,10],[0,8,3]],[[10,0,1],[10,6,0],[6,4,0]],[[8,3,1],[8,1,6],[8,6,4],[6,1,10]],[[1,4,9],[1,2,4],[2,6,4]],[[3,0,8],[1,2,9],[2,4,9],[2,6,4]],[[0,2,4],[4,2,6]],[[8,3,2],[8,2,4],[4,2,6]],[[10,4,9],[10,6,4],[11,2,3]],[[0,8,2],[2,8,11],[4,9,10],[4,10,6]],[[3,11,2],[0,1,6],[0,6,4],[6,1,10]],[[6,4,1],[6,1,10],[4,8,1],[2,1,11],[8,11,1]],[[9,6,4],[9,3,6],[9,1,3],[11,6,3]],[[8,11,1],[8,1,0],[11,6,1],[9,1,4],[6,4,1]],[[3,11,6],[3,6,0],[0,6,4]],[[6,4,8],[11,6,8]],[[7,10,6],[7,8,10],[8,9,10]],[[0,7,3],[0,10,7],[0,9,10],[6,7,10]],[[10,6,7],[1,10,7],[1,7,8],[1,8,0]],[[10,6,7],[10,7,1],[1,7,3]],[[1,2,6],[1,6,8],[1,8,9],[8,6,7]],[[2,6,9],[2,9,1],[6,7,9],[0,9,3],[7,3,9]],[[7,8,0],[7,0,6],[6,0,2]],[[7,3,2],[6,7,2]],[[2,3,11],[10,6,8],[10,8,9],[8,6,7]],[[2,0,7],[2,7,11],[0,9,7],[6,7,10],[9,10,7]],[[1,8,0],[1,7,8],[1,10,7],[6,7,10],[2,3,11]],[[11,2,1],[11,1,7],[10,6,1],[6,7,1]],[[8,9,6],[8,6,7],[9,1,6],[11,6,3],[1,3,6]],[[0,9,1],[11,6,7]],[[7,8,0],[7,0,6],[3,11,0],[11,6,0]],[[7,11,6]],[[7,6,11]],[[3,0,8],[11,7,6]],[[0,1,9],[11,7,6]],[[8,1,9],[8,3,1],[11,7,6]],[[10,1,2],[6,11,7]],[[1,2,10],[3,0,8],[6,11,7]],[[2,9,0],[2,10,9],[6,11,7]],[[6,11,7],[2,10,3],[10,8,3],[10,9,8]],[[7,2,3],[6,2,7]],[[7,0,8],[7,6,0],[6,2,0]],[[2,7,6],[2,3,7],[0,1,9]],[[1,6,2],[1,8,6],[1,9,8],[8,7,6]],[[10,7,6],[10,1,7],[1,3,7]],[[10,7,6],[1,7,10],[1,8,7],[1,0,8]],[[0,3,7],[0,7,10],[0,10,9],[6,10,7]],[[7,6,10],[7,10,8],[8,10,9]],[[6,8,4],[11,8,6]],[[3,6,11],[3,0,6],[0,4,6]],[[8,6,11],[8,4,6],[9,0,1]],[[9,4,6],[9,6,3],[9,3,1],[11,3,6]],[[6,8,4],[6,11,8],[2,10,1]],[[1,2,10],[3,0,11],[0,6,11],[0,4,6]],[[4,11,8],[4,6,11],[0,2,9],[2,10,9]],[[10,9,3],[10,3,2],[9,4,3],[11,3,6],[4,6,3]],[[8,2,3],[8,4,2],[4,6,2]],[[0,4,2],[4,6,2]],[[1,9,0],[2,3,4],[2,4,6],[4,3,8]],[[1,9,4],[1,4,2],[2,4,6]],[[8,1,3],[8,6,1],[8,4,6],[6,10,1]],[[10,1,0],[10,0,6],[6,0,4]],[[4,6,3],[4,3,8],[6,10,3],[0,3,9],[10,9,3]],[[10,9,4],[6,10,4]],[[4,9,5],[7,6,11]],[[0,8,3],[4,9,5],[11,7,6]],[[5,0,1],[5,4,0],[7,6,11]],[[11,7,6],[8,3,4],[3,5,4],[3,1,5]],[[9,5,4],[10,1,2],[7,6,11]],[[6,11,7],[1,2,10],[0,8,3],[4,9,5]],[[7,6,11],[5,4,10],[4,2,10],[4,0,2]],[[3,4,8],[3,5,4],[3,2,5],[10,5,2],[11,7,6]],[[7,2,3],[7,6,2],[5,4,9]],[[9,5,4],[0,8,6],[0,6,2],[6,8,7]],[[3,6,2],[3,7,6],[1,5,0],[5,4,0]],[[6,2,8],[6,8,7],[2,1,8],[4,8,5],[1,5,8]],[[9,5,4],[10,1,6],[1,7,6],[1,3,7]],[[1,6,10],[1,7,6],[1,0,7],[8,7,0],[9,5,4]],[[4,0,10],[4,10,5],[0,3,10],[6,10,7],[3,7,10]],[[7,6,10],[7,10,8],[5,4,10],[4,8,10]],[[6,9,5],[6,11,9],[11,8,9]],[[3,6,11],[0,6,3],[0,5,6],[0,9,5]],[[0,11,8],[0,5,11],[0,1,5],[5,6,11]],[[6,11,3],[6,3,5],[5,3,1]],[[1,2,10],[9,5,11],[9,11,8],[11,5,6]],[[0,11,3],[0,6,11],[0,9,6],[5,6,9],[1,2,10]],[[11,8,5],[11,5,6],[8,0,5],[10,5,2],[0,2,5]],[[6,11,3],[6,3,5],[2,10,3],[10,5,3]],[[5,8,9],[5,2,8],[5,6,2],[3,8,2]],[[9,5,6],[9,6,0],[0,6,2]],[[1,5,8],[1,8,0],[5,6,8],[3,8,2],[6,2,8]],[[1,5,6],[2,1,6]],[[1,3,6],[1,6,10],[3,8,6],[5,6,9],[8,9,6]],[[10,1,0],[10,0,6],[9,5,0],[5,6,0]],[[0,3,8],[5,6,10]],[[10,5,6]],[[11,5,10],[7,5,11]],[[11,5,10],[11,7,5],[8,3,0]],[[5,11,7],[5,10,11],[1,9,0]],[[10,7,5],[10,11,7],[9,8,1],[8,3,1]],[[11,1,2],[11,7,1],[7,5,1]],[[0,8,3],[1,2,7],[1,7,5],[7,2,11]],[[9,7,5],[9,2,7],[9,0,2],[2,11,7]],[[7,5,2],[7,2,11],[5,9,2],[3,2,8],[9,8,2]],[[2,5,10],[2,3,5],[3,7,5]],[[8,2,0],[8,5,2],[8,7,5],[10,2,5]],[[9,0,1],[5,10,3],[5,3,7],[3,10,2]],[[9,8,2],[9,2,1],[8,7,2],[10,2,5],[7,5,2]],[[1,3,5],[3,7,5]],[[0,8,7],[0,7,1],[1,7,5]],[[9,0,3],[9,3,5],[5,3,7]],[[9,8,7],[5,9,7]],[[5,8,4],[5,10,8],[10,11,8]],[[5,0,4],[5,11,0],[5,10,11],[11,3,0]],[[0,1,9],[8,4,10],[8,10,11],[10,4,5]],[[10,11,4],[10,4,5],[11,3,4],[9,4,1],[3,1,4]],[[2,5,1],[2,8,5],[2,11,8],[4,5,8]],[[0,4,11],[0,11,3],[4,5,11],[2,11,1],[5,1,11]],[[0,2,5],[0,5,9],[2,11,5],[4,5,8],[11,8,5]],[[9,4,5],[2,11,3]],[[2,5,10],[3,5,2],[3,4,5],[3,8,4]],[[5,10,2],[5,2,4],[4,2,0]],[[3,10,2],[3,5,10],[3,8,5],[4,5,8],[0,1,9]],[[5,10,2],[5,2,4],[1,9,2],[9,4,2]],[[8,4,5],[8,5,3],[3,5,1]],[[0,4,5],[1,0,5]],[[8,4,5],[8,5,3],[9,0,5],[0,3,5]],[[9,4,5]],[[4,11,7],[4,9,11],[9,10,11]],[[0,8,3],[4,9,7],[9,11,7],[9,10,11]],[[1,10,11],[1,11,4],[1,4,0],[7,4,11]],[[3,1,4],[3,4,8],[1,10,4],[7,4,11],[10,11,4]],[[4,11,7],[9,11,4],[9,2,11],[9,1,2]],[[9,7,4],[9,11,7],[9,1,11],[2,11,1],[0,8,3]],[[11,7,4],[11,4,2],[2,4,0]],[[11,7,4],[11,4,2],[8,3,4],[3,2,4]],[[2,9,10],[2,7,9],[2,3,7],[7,4,9]],[[9,10,7],[9,7,4],[10,2,7],[8,7,0],[2,0,7]],[[3,7,10],[3,10,2],[7,4,10],[1,10,0],[4,0,10]],[[1,10,2],[8,7,4]],[[4,9,1],[4,1,7],[7,1,3]],[[4,9,1],[4,1,7],[0,8,1],[8,7,1]],[[4,0,3],[7,4,3]],[[4,8,7]],[[9,10,8],[10,11,8]],[[3,0,9],[3,9,11],[11,9,10]],[[0,1,10],[0,10,8],[8,10,11]],[[3,1,10],[11,3,10]],[[1,2,11],[1,11,9],[9,11,8]],[[3,0,9],[3,9,11],[1,2,9],[2,11,9]],[[0,2,11],[8,0,11]],[[3,2,11]],[[2,3,8],[2,8,10],[10,8,9]],[[9,10,2],[0,9,2]],[[2,3,8],[2,8,10],[0,1,8],[1,10,8]],[[1,10,2]],[[1,3,8],[9,1,8]],[[0,9,1]],[[0,3,8]],[]];function He(e,t,n,r,a){var i=(a-n)/(r-n);return e*(1-i)+t*i}var Ge=function(){function e(t,n,r,a,i,o,s,c){Object(h.a)(this,e),this.x=t,this.y=n,this.z=r,this.xStep=a,this.yStep=i,this.zStep=o,this.c=c,this.v1=s(t,n,r),this.v2=s(t+a,n,r),this.v4=s(t+a,n,r+o),this.v8=s(t,n,r+o),this.v16=s(t,n+i,r),this.v32=s(t+a,n+i,r),this.v64=s(t+a,n+i,r+o),this.v128=s(t,n+i,r+o),this.edgePoints=new Map}return Object(f.a)(e,[{key:"getIndex",value:function(){for(var e=0,t=[this.v1,this.v2,this.v4,this.v8,this.v16,this.v32,this.v64,this.v128],n=0;n<t.length;n++){var r=Math.pow(2,n);e+=(t[n]>this.c)*r}return e}},{key:"getEdgePoint",value:function(e){if(this.edgePoints.has(e))return this.edgePoints.get(e);var t,n,r;switch(e){case 0:t=He(this.x,this.x+this.xStep,this.v1,this.v2,this.c),n=this.y,r=this.z;break;case 1:t=this.x+this.xStep,n=this.y,r=He(this.z,this.z+this.zStep,this.v2,this.v4,this.c);break;case 2:t=He(this.x,this.x+this.xStep,this.v8,this.v4,this.c),n=this.y,r=this.z+this.zStep;break;case 3:t=this.x,n=this.y,r=He(this.z,this.z+this.zStep,this.v1,this.v8,this.c);break;case 4:t=He(this.x,this.x+this.xStep,this.v16,this.v32,this.c),n=this.y+this.yStep,r=this.z;break;case 5:t=this.x+this.xStep,n=this.y+this.yStep,r=He(this.z,this.z+this.zStep,this.v32,this.v64,this.c);break;case 6:t=He(this.x,this.x+this.xStep,this.v128,this.v64,this.c),n=this.y+this.yStep,r=this.z+this.zStep;break;case 7:t=this.x,n=this.y+this.yStep,r=He(this.z,this.z+this.zStep,this.v16,this.v128,this.c);break;case 8:t=this.x,n=He(this.y,this.y+this.yStep,this.v1,this.v16,this.c),r=this.z;break;case 9:t=this.x+this.xStep,n=He(this.y,this.y+this.yStep,this.v2,this.v32,this.c),r=this.z;break;case 10:t=this.x+this.xStep,n=He(this.y,this.y+this.yStep,this.v4,this.v64,this.c),r=this.z+this.zStep;break;case 11:t=this.x,n=He(this.y,this.y+this.yStep,this.v8,this.v128,this.c),r=this.z+this.zStep;break;default:throw new Error("Edge index must be between 0 and 11")}return this.edgePoints.set(e,[t,n,r]),[t,n,r]}}]),e}();var Xe=window.THREE,Ze=["#33FF00","#2ecc71","#3498db","#9b59b6","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#808080"],We={rainbow:{css:"background: linear-gradient(\n      to right,\n      hsl(360, 100%, 50%),\n      hsl(300, 100%, 50%),\n      hsl(240, 100%, 50%),\n      hsl(180, 100%, 50%),\n      hsl(120, 100%, 50%),\n      hsl(60, 100%, 50%),\n      hsl(0, 100%, 50%)\n    )\n    ",func:function(e){var t=new Xe.Color(16777215);return t.setHSL(1-e,1,.5),[t.r,t.g,t.b,1]}},bluered:{css:"background: linear-gradient(to right, blue, red)",func:function(e){return[e,0,1-e,1]}},temperature:{css:"background: linear-gradient(\n      to right,\n      hsl(240, 100%, 50%),\n      hsl(180, 100%, 50%),\n      hsl(120, 100%, 50%),\n      hsl(60, 100%, 50%),\n      hsl(0, 100%, 50%)\n    )\n    ",func:function(e){var t=new Xe.Color(16777215);return t.setHSL(.666*(1-e),1,.5),[t.r,t.g,t.b,1]}}},Ye=window.THREE,qe=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).oldProps={},e.diffProps={added:new Set,deleted:new Set,unchanged:new Set,updated:new Set},e.shouldComponentUpdate=function(t){e.oldProps=e.props,e.diffProps=Ue(e.props,t);var n,r=e.diffProps,a=r.added,i=r.deleted,o=r.updated,s=r.unchanged,c=Object(Oe.a)(o);try{for(c.s();!(n=c.n()).done;){var l=n.value;Re(e.oldProps[l],t[l])&&(o.delete(l),s.add(l))}}catch(u){c.e(u)}finally{c.f()}return 0!==o.size||0!==a.size||0!==i.size},e.componentDidMount=function(){if(!e.props.mathboxParent)throw ReferenceError("".concat(e.constructor.name," called without a 'mathboxParent' property."));e.mathboxNode=e.mathboxRender(e.props.mathboxParent),e.mathbox=e.props.mathbox,e.forceUpdate(),e.updateHandledProps(e.props)},e.componentWillUnmount=function(){e.mathboxNode.remove()},e.renderChildren=function(){return e.props.children?r.Children.map(e.props.children,(function(t){return r.cloneElement(t,{mathboxParent:e.mathboxNode,mathbox:e.mathbox})})):null},e}return Object(f.a)(n,[{key:"render",value:function(){return this.mathboxNode?this.renderChildren():null}},{key:"getNodes",value:function(e){return e?this.mathboxNode.select(e.join(", ")):void 0}},{key:"updateHandledProps",value:function(e){var t=this,n={dataNodes:this.getNodes(this.dataNodeNames),renderNodes:this.getNodes(this.renderNodeNames),groupNode:this.mathboxNode,root:this.mathbox},r={};Object.keys(e).forEach((function(e){if(t.handlers.hasOwnProperty(e))try{var a=t.handlers[e](n,t.props,t.handlers);a&&Object.keys(a).forEach((function(e){r[e]=a[e]}))}catch(i){r[e]=i}})),this.props.handleErrors(r,this.props.id,e)}},{key:"componentDidUpdate",value:function(){var e=this,t=[].concat(Object(se.a)(this.diffProps.updated),Object(se.a)(this.diffProps.added)).reduce((function(t,n){return t[n]=e.props[n],t}),{});this.updateHandledProps(t)}}],[{key:"defaultHandleErrors",value:function(e,t,n){0!==Object.keys(e).length&&Object.keys(e).forEach((function(t){console.warn(e[t])}))}}]),n}(r.Component);function Je(e,t){return function(n,r){var a=n.renderNodes;return t&&t(r[e]),a.set(e,r[e])}}qe.defaultProps={handleErrors:qe.defaultHandleErrors};var $e={opacity:Je("opacity",Ie),zBias:Je("zBias",Ie),zIndex:Je("zIndex",Ie),zOrder:Je("zOrder",Ie),color:Je("color"),calculatedVisibility:function(e,t){var n=t.calculatedVisibility;t.useCalculatedVisibility&&(!function(e){if("boolean"!==typeof e)throw new TypeError("value must be boolean")}(n),e.groupNode.set("visible",n))},visible:function(e,t){t.useCalculatedVisibility||e.groupNode.set("visible",t.visible)}},Ke={size:Je("size",Ie),width:Je("width",Ie),start:Je("start"),end:Je("end")},Qe={shaded:Je("shaded")};function et(e){return function(t,n){var r=[].concat(Object(se.a)(Array(e).fill("")),[n.label]);t.groupNode.select("format.label").set("data",r)}}function tt(e,t){e.groupNode.select("label.label").set("visible",t.labelVisible)}function nt(e,t,n){return(e-t)/(n-t)}var rt=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).dataNodeNames=["camera"],r.renderNodeNames=null,r.handleIsOrthographic=function(e,t){var a=t.isOrthographic;r.isOrthographic!==a&&(a?(n.dollyZoom(e.root,r.dollyZoomFactor),r.isOrthographic=!0):(n.dollyZoom(e.root,1/r.dollyZoomFactor),r.isOrthographic=!1))},r.handleUseComputed=function(e,t){var a=t.computedPosition,i=t.computedLookAt;_e(a,3)&&r.handleComputedPosition(e,t),_e(i,3)&&n.handleComputedLookAt(e,t)},r.handleComputedPosition=function(e,t){var a,i=t.computedPosition,o=t.useComputed;if(Ne(i,3),o){var s=e.root,c=s.select("cartesian"),l=n.toRelativeCoords(i,c);if((a=s.three.camera.position).set.apply(a,Object(se.a)(l)),r.isOrthographic){var u=s.three,d=u.camera,p=u.controls;n.translateForDollyZoom(d,p,r.dollyZoomFactor)}}},r.mathboxRender=function(e){var t=e.group({classes:["camera"]});return t.camera({proxy:!0}),t},r.isOrthographic=!1,r.dollyZoomFactor=50,r.handlers={relativePosition:n.handleRelativePosition,relativeLookAt:n.handleRelativeLookAt,isRotateEnabled:n.handleIsRotateEnabled,isZoomEnabled:n.handleIsZoomEnabled,isPanEnabled:n.handlePanIsPanEnabled,computedPosition:r.handleComputedPosition,computedLookAt:n.handleComputedLookAt,useComputed:r.handleUseComputed,isOrthographic:r.handleIsOrthographic},r}return Object(f.a)(n,null,[{key:"frustrumHeightAtDistance",value:function(e,t){return 2*t*Math.tan(.5*e*Math.PI/180)}},{key:"fovForHeightAndDistance",value:function(e,t){return 2*Math.atan(.5*e/t)*180/Math.PI}},{key:"dollyZoom",value:function(e,t){var r=e.three,a=r.camera,i=r.controls,o=a.position.distanceTo(i.center),s=a.fov,c=n.frustrumHeightAtDistance(s,o),l=o*t,u=n.fovForHeightAndDistance(c,l);e.set("focus",e.get("focus")*t),n.translateForDollyZoom(a,i,t),a.fov=u}},{key:"translateForDollyZoom",value:function(e,t,n){var r=e.position.distanceTo(t.center);e.translateZ(r*(n-1))}},{key:"handlePanIsPanEnabled",value:function(e,t){e.root.three.controls.noPan=!t.isPanEnabled}},{key:"handleIsZoomEnabled",value:function(e,t){e.root.three.controls.noZoom=!t.isZoomEnabled}},{key:"handleIsRotateEnabled",value:function(e,t){e.root.three.controls.noRotate=!t.isRotateEnabled}},{key:"handleRelativePosition",value:function(e,t){var n=e.dataNodes,r=t.relativePosition;n.set("position",r)}},{key:"handleRelativeLookAt",value:function(e,t){var n,r=e.root,a=t.relativeLookAt;(n=r.three.controls.center).set.apply(n,Object(se.a)(a))}},{key:"handleComputedLookAt",value:function(e,t){var r,a=t.computedLookAt,i=t.useComputed;if(Ne(a,3),i){var o=e.root,s=o.select("cartesian"),c=n.toRelativeCoords(a,s);(r=o.three.controls.center).set.apply(r,Object(se.a)(c))}}},{key:"toRelativeCoords",value:function(e,t){var n=t.get("range"),r=t.get("scale").toArray();return e.map((function(e,t){var a=n[t],i=a.y,o=a.x;return(2/(i-o)*e+-(i+o)/(i-o))*r[t]}))}}]),n}(qe),at=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).dataNodeNames=["cartesian"],e.renderNodeNames=null,e.handlers={},e.mathboxRender=function(e){return e.cartesian({range:[[-5,5],[-5,5],[-5,5]],scale:[2,2,1]})},e}return n}(qe);var it=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).dataNodeNames=null,e.renderNodeNames=["axis"],e.handlers=Object(o.a)(Object(o.a)({},$e),{},{width:Je("width"),size:Je("size"),label:n.handleLabel,labelVisible:tt,min:n.handleMin,max:n.handleMax,axis:n.handleAxis,scale:n.handleScale,ticksVisible:n.handleTicksVisible}),e.mathboxRender=function(e){var t=e.group({classes:["axis"]});return t.axis().scale({divide:10,nice:!0,zero:!1}),t.group({classes:["ticks"]}).ticks({width:2}).format({digits:2}).label({classes:["tick-labels"]}),t.group({classes:["label"]}).array({channels:3,live:!1}).text({weight:"bold"}).label({offset:[0,40,0]}),t},e}return Object(f.a)(n,null,[{key:"handleTicksVisible",value:function(e,t){var n=e.groupNode,r=t.ticksVisible;n.select(".ticks").set("visible",r)}},{key:"handleLabel",value:function(e,t){e.groupNode.select(".label text").set("data",[t.label])}},{key:"handleScale",value:function(e,t){var r=t.scale,a=t.axis;Ie(r);var i=n.getCartesian(e.renderNodes),s=Object(o.a)({},i.props.scale);s[a]=r,i.set("scale",s)}},{key:"handleAxis",value:function(e,t){var n=t.axis;e.renderNodes.set("axis",n),e.groupNode.select("scale").set("axis",n),"z"===n&&e.groupNode.select(".ticks > label").set("offset",[20,0,0])}},{key:"handleMin",value:function(e,t){var r=t.min,a=t.axis;Ie(r);var i=n.getCartesian(e.renderNodes);n.setAxisEnd(i,a,r,0)}},{key:"handleMax",value:function(e,t){var r=t.max,a=t.axis;Ie(r);var i=n.getCartesian(e.renderNodes);n.setAxisEnd(i,a,r,1);var o=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,a=void 0===r?0:r,i=e.z;return[n,a,void 0===i?0:i]}(Object(u.a)({},a,r));e.groupNode.select(".label > array").set("data",[o])}},{key:"copyCartesianRange",value:function(e){var t=e.props.range;return[[t[0].x,t[0].y],[t[1].x,t[1].y],[t[2].x,t[2].y]]}},{key:"setAxisEnd",value:function(e,t,r,a){var i=n.copyCartesianRange(e);i[n.axisMap[t]][a]=r,e.set("range",i)}},{key:"getCartesian",value:function(e){for(var t=e[0];"cartesian"!==t.type;)if("root"===(t=t.parent).type)throw Error("Node type 'axis' should have 'cartesian' as an ancestor.");return t}}]),n}(qe);it.axisMap={x:0,y:1,z:2};var ot=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).dataNodeNames=null,e.renderNodeNames=["grid"],e.handlers=Object(o.a)(Object(o.a)({},$e),{},{axes:n.handleAxes,width:n.handleWidth,divisions:n.handleDivisions,snap:n.handleSnap}),e.mathboxRender=function(e){var t=e.group();return t.grid(),t},e}return Object(f.a)(n,null,[{key:"handleDivisions",value:function(e,t){var n=t.divisions;Ne(n,2),e.renderNodes.set({divideX:n[0],divideY:n[1]})}},{key:"handleSnap",value:function(e,t){e.renderNodes.set({niceX:t.snap,niceY:t.snap})}}]),n}(qe);ot.handleAxes=Je("axes"),ot.handleWidth=Je("width");var st=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).dataNodeNames=["array"],e.renderNodeNames=["point"],e.handlers=Object(o.a)(Object(o.a)({},$e),{},{label:et(0),labelVisible:tt,size:Je("size"),coords:n.handleCoords}),e.mathboxRender=function(e){var t=e.group({classes:["point"]});return t.array({items:1,channels:3}).point().format({classes:["label"],weight:"bold"}).label({classes:["label"],offset:[0,40,0]}),t},e}return Object(f.a)(n,null,[{key:"handleCoords",value:function(e,t){var n=t.coords,r=n instanceof Array&&n[0]instanceof Number?[n]:n;e.dataNodes.set("data",r)}}]),n}(qe),ct=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).dataNodeNames=["array"],e.renderNodeNames=["line"],e.handlers=Object(o.a)(Object(o.a)(Object(o.a)({},$e),Ke),{},{label:et(1),labelVisible:tt,coords:n.handleCoords}),e.mathboxRender=function(e){var t=e.group({classes:["line"]});return t.array({items:1,channels:3}).line().format({classes:["label"],weight:"bold"}).label({classes:["label"],offset:[0,40,0]}),t},e}return Object(f.a)(n,null,[{key:"handleCoords",value:function(e,t){e.dataNodes.set("data",t.coords)}}]),n}(qe),lt=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).dataNodeNames=["array"],e.renderNodeNames=["line"],e.handlers=Object(o.a)(Object(o.a)(Object(o.a)({},$e),Ke),{},{label:et(1),labelVisible:tt,components:n.handleComponents,tail:n.handleTail}),e.mathboxRender=function(e){var t=e.group({classes:["vector"]});return t.array({items:1,channels:3}).line().format({classes:["label"],weight:"bold"}).label({classes:["label"],offset:[0,40,0]}),t},e}return Object(f.a)(n,null,[{key:"handleTail",value:function(e,t){var r=t.tail,a=t.components;Ne(r,3),_e(a,3)&&n.updateData(e,t)}},{key:"handleComponents",value:function(e,t){var r=t.tail;Ne(t.components,3),_e(r,3)&&n.updateData(e,t)}},{key:"updateData",value:function(e,t){var n=t.tail,r=t.components,a=Ae.add(n,r);e.dataNodes.set("data",[n,a])}}]),n}(qe),ut=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).dataNodeNames=["interval"],e.renderNodeNames=["line"],e.handlers=Object(o.a)(Object(o.a)(Object(o.a)({},$e),Ke),{},{range:n.handleRange,expr:n.handleExpr,samples:n.handleSamples}),e.mathboxRender=function(e){var t=e.group(),n=t.cartesian().interval({channels:3,axis:1,live:!1});return t.line({points:n}),t},e}return Object(f.a)(n,null,[{key:"handleRange",value:function(e,t){var r=t.range;Ne(r,2),e.groupNode.select("cartesian").set("range",[r,[0,1]]),n.forceUpdate(e,t)}},{key:"handleExpr",value:function(e,t){var n=t.expr;Me(n,1,3),e.dataNodes.set("expr",(function(e,t){return e.apply(void 0,Object(se.a)(n(t)))}))}},{key:"handleSamples",value:function(e,t){var n=t.samples;Ie(n),e.dataNodes.set("width",n)}},{key:"forceUpdate",value:function(e,t){try{n.handleExpr(e,t)}catch(r){}}}]),n}(qe),dt=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).dataNodeNames=["area.data"],r.renderNodeNames=["surface"],r.handleColor=function(e,t){var n=t.color,a=e.groupNode,i=a.select("line"),o=a.select(".colors");if(We.hasOwnProperty(n))return r.handleColorExpr(e,t),void i.set("color","gray");o.set("expr",(function(e){var t=new Ye.Color(n);e(t.r,t.g,t.b,1)}));var s=x(n,-.75);i.set("color",s)},r.canUpdateColorExpr=function(e){var t=e.colorExpr,a=e.color,i=e.expr,o=e.uSamples,s=e.vSamples,c=e.rangeU,l=e.rangeV;return!!Le(t,5,1)&&(!!We[a]&&(!(!Ve(o)||!Ve(s))&&(!!r.constructor.isExprValid(i)&&!!n.isRangeValid(c,l))))},r.handleColorExpr=function(e,t){var a=t.colorExpr,i=t.expr,o=t.rangeU,s=t.rangeV;if(Me(a,5,1),r.canUpdateColorExpr(t)){var c=n.getTrueParamsFunc(o,s),l=r.constructor.transformExpr(i);n.updateColorExpr(e,t,c,l)}},r.handleRange=function(e,t){var a=t.rangeU,i=t.rangeV,o=t.expr,s=e.dataNodes,c=r.constructor.isExprValid(o);if(!n.isRangeValid(a,i))throw"function"===typeof a&&"function"===typeof i?new Error("Either the u-range can depend on v, OR the v-range can dependent on u, but NOT both."):new Error("Parameter ranges must be 2-component arrays.");if(c){var l=n.getTrueParamsFunc(a,i),u=r.constructor.transformExpr(o);if(n.updateExpr(s,l,u),r.canUpdateColorExpr(t))return n.updateColorExpr(e,t,l,u),{rangeU:null,rangeV:null}}},r.handleExpr=function(e,t){var a=t.expr,i=t.rangeU,o=t.rangeV;r.constructor.validateExpr(a);var s=e.dataNodes;if(n.isRangeValid(i,o)){var c=n.getTrueParamsFunc(i,o),l=r.constructor.transformExpr(a);n.updateExpr(s,c,l),r.canUpdateColorExpr(t)&&n.updateColorExpr(e,t,c,l)}},r.mathboxRender=function(e){var t=e.group();return n.renderParametricSurface(t)},r.handlers=Object(o.a)(Object(o.a)(Object(o.a)({},$e),Qe),{},{zOrder:n.handleZOrder,color:r.handleColor,colorExpr:r.handleColorExpr,expr:r.handleExpr,rangeU:r.handleRange,rangeV:r.handleRange,uSamples:n.handleUSamples,vSamples:n.handleVSamples,gridWidth:n.handleGridWidth,gridOpacity:n.handleGridOpacity,gridU:n.handleGridU,gridV:n.handleGridV}),r}return Object(f.a)(n,null,[{key:"handleZOrder",value:function(e,t){var n=t.zOrder,r=e.groupNode;r.select("surface").set({zOrder:n}),r.select("line").set({zOrder:n+.001})}},{key:"handleGridOpacity",value:function(e,t){var n=t.gridOpacity,r=e.groupNode;Ie(n),r.select("line").set("opacity",n)}},{key:"handleGridWidth",value:function(e,t){var n=t.gridWidth,r=e.groupNode;Ie(n),r.select("line").set("width",n)}},{key:"handleGridU",value:function(e,t){var n=t.gridU;Ie(n),e.groupNode.select(".gridU resample").set("width",n)}},{key:"handleGridV",value:function(e,t){var n=t.gridV;Ie(n),e.groupNode.select(".gridV resample").set("height",n)}},{key:"handleUSamples",value:function(e,t,r){var a=e.groupNode,i=t.uSamples;Ie(i);var o=a.select("area"),s=a.select(".colors");null===o.get("width")?(o.set("width",i),s.set("width",i)):n.rerender(e,t,r)}},{key:"handleVSamples",value:function(e,t,r){var a=e.groupNode,i=t.vSamples;Ie(i);var o=a.select("area"),s=a.select(".colors");null===o.get("height")?(o.set("height",i),s.set("height",i)):n.rerender(e,t,r)}},{key:"updateColorExpr",value:function(e,t,n,r){var a=t.color,i=t.colorExpr,o=t.uSamples,s=t.vSamples,c=e.root,l=e.groupNode.select(".colors"),u=c.select("cartesian")[0],d=We[a].func,p=it.copyCartesianRange(u),h=Object(oe.a)(p,3),f=Object(oe.a)(h[0],2),m=f[0],v=f[1],b=Object(oe.a)(h[1],2),y=b[0],g=b[1],O=Object(oe.a)(h[2],2),E=O[0],j=O[1];l.set({expr:function(e,t,a){var o=n(t,a),s=Object(oe.a)(o,2),c=s[0],l=s[1],u=r(c,l),p=Object(oe.a)(u,3),h=p[0],f=p[1],b=p[2],O=nt(h,m,v),x=nt(f,y,g),C=nt(b,E,j),w=i(O,x,C,c,l);e.apply(void 0,Object(se.a)(d(w)))},width:o,height:s})}},{key:"isRangeValid",value:function(e,t){return!(!_e(e,2)||!_e(t,2))||(!(!Le(e,1,2)||!_e(t,2))||!(!_e(e,2)||!Le(t,1,2)))}},{key:"isExprValid",value:function(e){return Le(e,2,3)}},{key:"validateExpr",value:function(e){Me(e,2,3)}},{key:"transformExpr",value:function(e){return e}},{key:"getTrueParamsFunc",value:function(e,t){if(Array.isArray(e)&&Array.isArray(t))return function(n,r){var a=e,i=t;return[a[0]+n*(a[1]-a[0]),i[0]+r*(i[1]-i[0])]};if(Array.isArray(e)&&"function"===typeof t)return function(n,r){var a=e,i=a[0]+n*(a[1]-a[0]),o=t(i);return[i,o[0]+r*(o[1]-o[0])]};if(Array.isArray(t)&&"function"===typeof e)return function(n,r){var a=t,i=a[0]+r*(a[1]-a[0]),o=e(i);return[o[0]+n*(o[1]-o[0]),i]};throw new Error("Expected rangeV and rangeU to be (1) array, array (2)\n                       array, function, or (3) function, array. Instead, found\n                       ".concat(typeof e," and ").concat(typeof t))}},{key:"updateExpr",value:function(e,t,n){e.set("expr",(function(e,r,a){var i=t(r,a),o=Object(oe.a)(i,2),s=o[0],c=o[1],l=n(s,c),u=Object(oe.a)(l,3);e(u[0],u[1],u[2])}))}},{key:"renderParametricSurface",value:function(e){var t=e.area({classes:["data"],channels:3,axes:[1,2],live:!1,rangeX:[0,1],rangeY:[0,1]}),n=e.area({classes:["colors"],channels:4,items:1,axes:[1,2],live:!1,rangeX:[0,1],rangeY:[0,1],width:2,height:2});return e.surface({points:t,colors:n,color:"#FFFFFF"}).group({classes:["gridV"]}).resample({source:t}).line({zBias:5}).end().group({classes:"gridU"}).resample({source:t}).transpose({order:"yx"}).line({zBias:5}).end(),e}},{key:"rerender",value:function(e,t,r){var a=e.groupNode,i=e.root;a.select("area, surface, .gridU, .gridV").remove(),n.renderParametricSurface(a);var o={groupNode:a,root:i,dataNodes:a.select("area.data"),renderNodes:a.select("surface")};Object.keys(r).forEach((function(e){r[e](o,t,r)}))}}]),n}(qe),pt=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,null,[{key:"isExprValid",value:function(e){return Le(e,2,1)}},{key:"validateExpr",value:function(e){Me(e,2,1)}},{key:"transformExpr",value:function(e){return function(t,n){return[t,n,e(t,n)]}}}]),n}(dt),ht=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,null,[{key:"isExprValid",value:function(e){return Le(e,2,1)}},{key:"validateExpr",value:function(e){Me(e,2,1)}},{key:"transformExpr",value:function(e){return function(t,n){return[t*Math.cos(n),t*Math.sin(n),e(t,n)]}}}]),n}(dt),ft=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).dataNodeNames=["array"],e.renderNodeNames=["strip"],e.handlers=Object(o.a)(Object(o.a)({},$e),{},{shaded:Je("shaded"),lhs:n.handleLHS,rhs:n.handleRHS,rangeX:n.makeHandleRange("rangeX"),rangeY:n.makeHandleRange("rangeY"),rangeZ:n.makeHandleRange("rangeZ"),samples:n.handleSamples}),e.mathboxRender=function(e){var t=e.group();return t.array({channels:3,items:3,width:0,live:!1}).strip(),t},e}return Object(f.a)(n,null,[{key:"handleLHS",value:function(e,t){Me(t.lhs,3,1),n.updateData(e,t)}},{key:"handleRHS",value:function(e,t){Me(t.rhs,3,1),n.updateData(e,t)}},{key:"makeHandleRange",value:function(e){return function(t,r){Ne(r[e],2),n.updateData(t,r)}}},{key:"handleSamples",value:function(e,t){Ie(t.samples),n.updateData(e,t)}},{key:"canUpdate",value:function(e){var t=e.lhs,n=e.rhs,r=e.rangeX,a=e.rangeY,i=e.rangeZ,o=e.samples;return _e(r,2)&&_e(a,2)&&_e(i,2)&&Le(t,3,1)&&Le(n,3,1)&&Ve(o)}},{key:"updateData",value:function(e,t){if(n.canUpdate(t)){var r=t.lhs,a=t.rhs,i=t.rangeX,o=t.rangeY,s=t.rangeZ,c=t.samples,l=e.dataNodes,u=function(e,t,n,r,a,i,o){for(var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:128,l=(t-e)/c,u=(r-n)/c,d=(i-a)/c,p=[],h=e;h<t;h+=l)for(var f=n;f<r;f+=u)for(var m=a;m<i;m+=d)for(var v=new Ge(h,f,m,l,u,d,o,s),b=Be[v.getIndex()],y=0;y<b.length;y++){var g=b[y];p.push([v.getEdgePoint(g[0]),v.getEdgePoint(g[1]),v.getEdgePoint(g[2])])}return p}(i[0],i[1],o[0],o[1],s[0],s[1],(function(e,t,n){return r(e,t,n)-a(e,t,n)}),0,c),d=u.length;if(d>5400)throw new Error("Too many data points generated. Please decrease sample size.");l.set({data:u,width:d})}}}]),n}(qe),mt=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).dataNodeNames=["volume"],e.renderNodeNames=["vector"],e.handlers=Object(o.a)(Object(o.a)(Object(o.a)({},$e),Ke),{},{rangeX:n.makeHandleRange("rangeX"),rangeY:n.makeHandleRange("rangeY"),rangeZ:n.makeHandleRange("rangeZ"),samples:n.handleSamples,scale:n.handleScale,expr:n.handleExpr}),e.mathboxRender=function(e){var t=e.group({classes:["vector-field"]});return n.renderVectorField(t)},e}return Object(f.a)(n,null,[{key:"makeHandleRange",value:function(e){return function(t,r){Ne(r[e],2),n.updateRangeAndExpr(t,r)}}},{key:"handleExpr",value:function(e,t){Me(t.expr,3,3),n.updateRangeAndExpr(e,t)}},{key:"handleScale",value:function(e,t){Ve(t.scale),n.updateRangeAndExpr(e,t)}},{key:"canUpdateRangeAndExpr",value:function(e,t,n,r,a,i){return _e(e,2)&&_e(t,2)&&_e(n,2)&&_e(a,3)&&Ve(i)&&Le(r,3,3)}},{key:"updateRangeAndExpr",value:function(e,t){var r=t.rangeX,a=t.rangeY,i=t.rangeZ,o=t.expr,s=t.samples,c=t.scale,l=e.dataNodes;n.canUpdateRangeAndExpr(r,a,i,o,s,c)&&l.set("expr",(function(e,t,n,l){var u=1===s[0]?.5:t,d=1===s[1]?.5:n,p=1===s[2]?.5:l,h=r[0]+u*(r[1]-r[0]),f=a[0]+d*(a[1]-a[0]),m=i[0]+p*(i[1]-i[0]);e(h,f,m);var v=o(h,f,m),b=Object(oe.a)(v,3),y=b[0],g=b[1],O=b[2];e(h+c*y,f+c*g,m+c*O)}))}},{key:"renderVectorField",value:function(e){return e.volume({items:2,channels:3,rangeX:[0,1],rangeY:[0,1],rangeZ:[0,1]}).vector(),e}},{key:"rerender",value:function(e,t,r){var a=e.groupNode,i=e.root;a.select("volume, vector").remove(),n.renderVectorField(a);var o={groupNode:a,root:i,dataNodes:a.select("volume"),renderNodes:a.select("vector")};Object.keys(r).forEach((function(e){r[e](o,t,r)}))}},{key:"handleSamples",value:function(e,t,r){var a=e.dataNodes,i=t.samples;Ne(i,3),null===a.get("width")?a.set({width:i[0],height:i[1],depth:i[2]}):n.rerender(e,t,r)}}]),n}(qe);function vt(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function bt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yt(e,t,n){return e.replace(new RegExp(bt(t),"g"),n)}function gt(e,t){var n=e[t],r={"[":"]","<":">","(":")","{":"}"}[n];if(void 0===r)throw Error("".concat(e," does not contain an opening brace at position ").concat(t,"."));for(var a=1,i=t+1;i<e.length;i++)if(e[i]===n?a+=1:e[i]===r&&(a+=-1),0===a)return i;throw Error("".concat(e," has a brace that opens at position ").concat(t," but does not close."))}var Ot=function(){function e(t){var n=t.type,r=t.description,a=t.metadata,i=t.uiComponent,o=t.mathboxComponent,s=t.support,c=void 0===s?"full":s;Object(h.a)(this,e),this.reducer="mathGraphics",this.type=n,this.support=c,this.uiComponent=i,this.mathboxComponent=o,this.defaultSettings=e.getDefaultSettings(n,a,r),this.computedProps=Object.keys(a).filter((function(e){return"math"===a[e].inputType}))}return Object(f.a)(e,null,[{key:"getDefaultSettings",value:function(e,t,n){var r={type:e,description:n||vt(e),useCalculatedVisibility:!1};return Object.keys(t).reduce((function(e,n){return e[n]=t[n].defaultValue,e}),r)}}]),e}(),Et=n(355),jt=function e(t,n){var r=(e.canvas||(e.canvas=document.createElement("canvas"))).getContext("2d");r.font=n;var a=r.measureText(t);return Math.floor(a.width)+1};function xt(){var e=Object(y.a)(["\n  width: ",";\n  max-width: ",";\n  min-height:24px;\n  resize: none;\n  border-top:none;\n  border-left: none;\n  border-right:none;\n  border-radius: 0px;\n  padding-bottom: 1px; /*MO border was appearing too small. This fixed it. I do not understand ... */\n  padding-top: 0px;\n  padding-right:2px;\n  padding-left:2px;\n  border-bottom: 1px solid ",";\n  color: ",";\n  &:focus {\n    outline: none;\n    border-bottom: 2px solid ",";\n  };\n  overflow:hidden;\n"]);return xt=function(){return e},e}window.getTextWidth=jt;var Ct=Object(g.c)(Et.a)(xt(),(function(e){return e.width}),(function(e){return e.maxwidth?"".concat(e.maxwidth,"px"):"100%"}),(function(e){return e.theme.gray[5]}),(function(e){return e.theme.gray[6]}),(function(e){return e.theme.primary[4]})),wt=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){var n=t.currentTarget.value;e.props.onChange(n)},e}return Object(f.a)(n,[{key:"getWidthFromText",value:function(e){var t=jt(e+" ","14px sans-serif");return"".concat(1.1*t+5+4,"px")}},{key:"render",value:function(){var e=this.getWidthFromText(this.props.value);return r.createElement(Ct,{rows:1,width:e,maxwidth:this.props.maxwidth,value:this.props.value,onChange:this.onChange,style:this.props.style,className:this.props.className})}}]),n}(r.PureComponent);function kt(){var e=Object(y.a)(["\n  padding:0px;\n  margin-right: -3px;\n  margin-top: -6px;\n  min-width:25px;\n  max-width:25px;\n  height:25px;\n  position:absolute;\n  right:0;\n  top:0;\n  display:flex;\n  justify-content: center;\n  align-items: center;\n  font-size:133%;\n  color: ",";\n"]);return kt=function(){return e},e}var Pt=Object(g.c)(V)(kt(),(function(e){return e.theme.gray[5]}));function Tt(e){return a.a.createElement(Pt,e,a.a.createElement(O.a,{type:"close"}))}var St={borderRadius:"4px",transitionDuration:"300ms",transitionDurationMS:300,transitionTimingFunction:"cubic-bezier(0.645, 0.045, 0.355, 1);",gray:["#ffffff","#fafafa","#f5f5f5","#e8e8e8","#d9d9d9","#bfbfbf","#8c8c8c","#595959","#262626","#000000"],primary:["#e6f7ff","#bae7ff","#91d5ff","#69c0ff","#40a9ff","#1890ff","#096dd9","#0050b3","#003a8c","#002766"]},At=St;function Rt(){var e=Object(y.a)(["\n  position:relative;\n  max-width:75vw;\n"]);return Rt=function(){return e},e}function Vt(){var e=Object(y.a)(["\n    overflow: hidden;\n  "]);return Vt=function(){return e},e}function It(){var e=Object(y.a)(["\n  display:flex;\n  flex-direction:column;\n  width: calc(100% - ",");\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 6px;\n  padding-right: 6px;\n  ",";\n"]);return It=function(){return e},e}function Dt(){var e=Object(y.a)(["\n  width:1px;\n  height:100%;\n  background-color: ",";\n  display:flex;\n  flex-direction:column;\n  justify-content: space-around;\n  align-items: center;\n"]);return Dt=function(){return e},e}function _t(){var e=Object(y.a)(["\n    background-color: ","\n  "]);return _t=function(){return e},e}function Nt(){var e=Object(y.a)(["\n  margin-bottom:-1px; /*Compensates for margin-bottom:-1px in OuterContainer*/\n  padding-top: 2px;\n  padding-bottom: 2px;\n  width: ",";\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  transition-duration: ",";\n  transition-timing-function: ",";\n  transition-property: background-color;\n  /* This makes fixed-width */\n  flex-basis: auto;\n  flex-grow: 0;\n  flex-shrink: 0;\n  ","\n"]);return Nt=function(){return e},e}function Mt(){var e=Object(y.a)(["\n    transform: scale(0);\n    transform-origin: top left;\n  "]);return Mt=function(){return e},e}function Lt(){var e=Object(y.a)(["\n  display: inline-flex;\n  vertical-align: top; /*Removes extra space below inline element's baseline*/\n  min-width:100%;\n  max-width: ",";\n  background-color: white;\n  margin-bottom: -2px;\n  border: 1px solid ",";\n  transition-duration: ",";\n  transition-timing-function: ",";\n  transition-property: all;\n  ",";\n  /*\n  Note:\n  - above, margin-bottom: -1px prevents double-thick borders between (Folders\n    are also mathObjects)\n  - But this causes very last MathObject in very last folder to lose its border.\n  - This is taken care of by border on SortableListOfFolders\n   */\n"]);return Lt=function(){return e},e}var Ft=g.c.span(Lt(),(function(e){return e.isActive?"auto":"100%"}),(function(e){return e.theme.gray[5]}),(function(e){return e.theme.transitionDuration}),(function(e){return e.theme.transitionTimingFunction}),(function(e){return e.isDeleting&&Object(g.b)(Mt())})),zt=g.c.div(Nt(),"40px",(function(e){return e.theme.transitionDuration}),(function(e){return e.theme.transitionTimingFunction}),(function(e){return e.isActive&&Object(g.b)(_t(),(function(e){return e.theme.primary[1]}))})),Ut=g.c.div(Dt(),(function(e){return e.theme.gray[5]})),Bt=g.c.div(It(),"40px",(function(e){return!e.isActive&&Object(g.b)(Vt())})),Ht=g.c.div(Rt()),Gt=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={isDeleting:!1,parentMaxWidth:null},a.onDelete=function(){var e=a.props,t=e.id,n=e.type,r=e.parentId,i=e.positionInParent;a.props.setActiveObject(null),a.setState({isDeleting:!0}),setTimeout((function(){return a.props.deleteMathObject(t,n,r,i)}),St.transitionDurationMS)},a.onFocus=function(){a.props.setActiveObject(a.props.id)},a.setProperty=a.setProperty.bind(Object(m.a)(a)),a.onEditDescription=a.onEditDescription.bind(Object(m.a)(a)),a.containerRef=Object(r.createRef)(),a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.setState({parentMaxWidth:this.getParentMaxWidth()})}},{key:"getParentMaxWidth",value:function(){var e=this.containerRef.current;return e?e.parentElement.offsetWidth:void 0}},{key:"setProperty",value:function(e,t){var n=this.props,r=n.id,a=n.type;this.props.setProperty(r,a,e,t)}},{key:"onEditDescription",value:function(e){this.setProperty("description",e)}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.sidePanelContent,i=e.description,o=e.children,s=e.isDeleteable,c=e.isFolder;return a.a.createElement(r.Fragment,null,a.a.createElement(Ft,{ref:this.containerRef,onFocus:this.onFocus,isActive:t,isFolder:c,isDeleting:this.state.isDeleting},a.a.createElement(zt,{isActive:t},c?n:a.a.createElement(Ut,null," ",n," ")),a.a.createElement(Bt,{isActive:t},a.a.createElement(Ht,null,a.a.createElement(wt,{maxwidth:this.state.parentMaxWidth-70,value:i,onChange:this.onEditDescription,isFolder:c}),a.a.createElement(Tt,{onClick:this.onDelete,disabled:!s})),!c&&o)),c&&o)}}]),n}(r.PureComponent);Gt.defaultProps={isFolder:!1,showAncestry:!0,sidePanelContent:null};var Xt=n(16);function Zt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"SET_ACTIVE_OBJECT",payload:{id:e}}}function Wt(e,t){var n=function(e,t){var n=new Set;return Object.keys(e).reduce((function(n,r){return e[r].includes(t)&&n.add(r),n}),n)}(e,t);if(n.size<1)throw Error("".concat(t," does not have parent"));if(n.size>1)throw Error("".concat(t," has multiple parents"));return Array.from(n)[0]}var Yt="FOLDER";var qt={setActiveObject:Zt,deleteMathObject:function(e,t,n,r){return{type:"DELETE_MATH_OBJECT",name:t,payload:{parentId:n,id:e,positionInParent:r}}},setProperty:re},Jt=Object(Xt.b)((function(e,t){var n=t.id,r=e.sortableTree,a=function(e,t){for(var n,r=0,a=0,i=[e.mathGraphics,e.mathSymbols,e.folders];a<i.length;a++){var o=i[a];o[t]&&(r+=1,n=o[t])}if(1!==r)throw Error("Expected ".concat(t," to be present in exactly 1 of [mathGraphics, mathSymbols, folders] but it was present in ").concat(r));return n}(e,n),i=function(e,t){var n=e.id,r=e.type,a=e.isDeleteable;return void 0!==a?a:r!==Yt||0===t[n].length&&1!==t.root.length}(t,r),o=Wt(r,n);return{isActive:e.activeObject===n,parentId:o,isDeleteable:i,positionInParent:r[o].indexOf(n),description:a.description}}),qt)(Gt);function $t(e){return{inputType:"text",defaultValue:e,isPrimary:!0}}var Kt={color:{inputType:"text",defaultValue:"#3090FF",isPrimary:!0},visible:{inputType:"boolean",defaultValue:!0,isPrimary:!0},opacity:{inputType:"math",defaultValue:"1"},zIndex:{inputType:"math",defaultValue:"0",label:"z-index"},zBias:{inputType:"math",defaultValue:"0",label:"z-bias"},calculatedVisibility:{inputType:"math",defaultValue:"",allowEmpty:!0,label:"calculated visibility"}},Qt={label:{inputType:"text",defaultValue:""},labelVisible:{inputType:"boolean",defaultValue:!1,label:"label visible"}},en=Object(o.a)(Object(o.a)(Object(o.a)({},Kt),Qt),{color:{inputType:"text",defaultValue:"#808080",isPrimary:!0},min:{inputType:"math",defaultValue:"-5",isPrimary:!0},max:{inputType:"math",defaultValue:"+5",isPrimary:!0},axis:{inputType:"text",defaultValue:"x",isPrimary:!0},scale:{inputType:"math",defaultValue:"1"},labelVisible:{inputType:"boolean",defaultValue:!0,label:"label visible"},ticksVisible:{inputType:"boolean",defaultValue:!0,label:"ticks visible"},size:{inputType:"math",defaultValue:"2"},width:{inputType:"math",defaultValue:"1"}}),tn=Object(o.a)(Object(o.a)({},Kt),{color:{inputType:"text",defaultValue:"#808080",isPrimary:!0},width:{inputType:"math",defaultValue:"1/2"},divisions:{inputType:"math",defaultValue:"\\left[10,\\ 10\\right]"},snap:{inputType:"boolean",defaultValue:!0}}),nn={description:$t("Point"),coords:{inputType:"math",defaultValue:"\\left[0,0,0\\right]",isPrimary:!0},size:{inputType:"math",defaultValue:"16"}},rn=Object(o.a)(Object(o.a)(Object(o.a)({},Kt),Qt),nn),an={size:{inputType:"math",defaultValue:"6"},width:{inputType:"math",defaultValue:"4"},start:{inputType:"boolean",defaultValue:!1},end:{inputType:"boolean",defaultValue:!1}},on={description:$t("Line"),coords:{inputType:"math",defaultValue:"\\left[\\left[1,1,1\\right], \\left[-1,1,-1\\right]\\right]",isPrimary:!0}},sn=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},Kt),Qt),an),on),cn=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},Kt),Qt),an),{components:{inputType:"math",defaultValue:"\\left[3,2,1\\right]",isPrimary:!0},tail:{inputType:"math",defaultValue:"\\left[0,0,0\\right]"},end:{inputType:"boolean",defaultValue:!0}}),ln=Object(o.a)(Object(o.a)(Object(o.a)({},Kt),an),{expr:{inputType:"math",defaultValue:"_f(t)=\\left[\\cos\\left(t\\right),\\ \\sin\\left(t\\right),\\ t\\right]",isPrimary:!0},range:{inputType:"math",defaultValue:"\\left[-2\\pi,\\ 2\\pi\\right]",isPrimary:!0},samples:{inputType:"math",defaultValue:"128"}}),un={shaded:{inputType:"boolean",defaultValue:!0},opacity:{inputType:"math",defaultValue:"0.75"}};function dn(e,t){return{uSamples:{inputType:"math",defaultValue:"64",label:"".concat(e," samples")},vSamples:{inputType:"math",defaultValue:"64",label:"".concat(t," samples")},gridU:{inputType:"math",defaultValue:"8",label:"".concat(e," gridlines")},gridV:{inputType:"math",defaultValue:"8",label:"".concat(t," gridlines")}}}var pn=Object(o.a)({expr:{inputType:"math",defaultValue:"_f(u,v)=\\left[v\\cdot\\cos\\left(u\\right),v\\cdot\\sin\\left(u\\right),v\\right]",isPrimary:!0},rangeU:{inputType:"math",defaultValue:"\\left[-\\pi,\\ \\pi\\right]",isPrimary:!0},rangeV:{inputType:"math",defaultValue:"\\left[-3, 3\\right]",isPrimary:!0},colorExpr:{isPrimary:!0,inputType:"math",defaultValue:"_f(X, Y, Z, u, v)=mod(Z, 1)"},gridOpacity:{inputType:"math",defaultValue:"0.5"},gridWidth:{inputType:"math",defaultValue:"2"}},dn("u","v")),hn=Object(o.a)(Object(o.a)(Object(o.a)({},Kt),un),pn),fn=Object(o.a)(Object(o.a)(Object(o.a)({},hn),dn("x","y")),{},{expr:{inputType:"math",defaultValue:"_f(x,y)=x^2-y^2",isPrimary:!0},rangeU:{inputType:"math",defaultValue:"\\left[-2,\\ 2\\right]",isPrimary:!0},rangeV:{inputType:"math",defaultValue:"\\left[-2,\\ 2\\right]",isPrimary:!0},colorExpr:{isPrimary:!0,inputType:"math",defaultValue:"_f(X, Y, Z, x, y)=mod(Z, 1)"}}),mn=Object(o.a)(Object(o.a)(Object(o.a)({},hn),dn("r","\u03b8")),{},{expr:{inputType:"math",defaultValue:"_f(r,\\theta)=\\frac{1}{4}r^2\\cdot\\cos\\left(3\\theta\\right)",isPrimary:!0},rangeU:{inputType:"math",defaultValue:"\\left[0,\\ 3\\right]",isPrimary:!0},rangeV:{inputType:"math",defaultValue:"\\left[-\\pi,\\ \\pi\\right]",isPrimary:!0},colorExpr:{isPrimary:!0,inputType:"math",defaultValue:"_f(X, Y, Z, r, \\theta)=mod(Z, 1)"}}),vn={rangeX:{inputType:"math",defaultValue:"\\left[-5,\\ 5\\right]",isPrimary:!0},rangeY:{inputType:"math",defaultValue:"\\left[-5,\\ 5\\right]",isPrimary:!0},rangeZ:{inputType:"math",defaultValue:"\\left[-5,\\ 5\\right]",isPrimary:!0}},bn=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},Kt),un),vn),{lhs:{inputType:"math",defaultValue:"_f(x,y,z)=x^2+y^2",isPrimary:!0},rhs:{inputType:"math",defaultValue:"_f(x,y,z)=z^2+1",isPrimary:!0},samples:{inputType:"math",defaultValue:"20"},opacity:{inputType:"math",defaultValue:"1"}}),yn=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},Kt),an),vn),{expr:{inputType:"math",defaultValue:"_f(x,y,z)=\\frac{[y,\\ -x,\\ 0]}{\\sqrt{x^2+y^2}}",isPrimary:!0},samples:{inputType:"math",defaultValue:"[10, 10, 5]"},scale:{inputType:"math",defaultValue:"1"},width:{inputType:"math",defaultValue:"2"},end:{inputType:"boolean",defaultValue:!0}}),gn={isOrthographic:{inputType:"boolean",defaultValue:!1,isPrimary:!0},isPanEnabled:{inputType:"boolean",defaultValue:!1,isPrimary:!0},isZoomEnabled:{inputType:"boolean",defaultValue:!0,isPrimary:!0},isRotateEnabled:{inputType:"boolean",defaultValue:!0,isPrimary:!0},relativePosition:{inputType:"numericArray",defaultValue:[.5,-2,.5],isPrimary:!0},relativeLookAt:{inputType:"numericArray",defaultValue:[0,0,0],isPrimary:!0},computedPosition:{inputType:"math",defaultValue:"\\left[-6, -4, 2\\right]",isPrimary:!0},computedLookAt:{inputType:"math",defaultValue:"\\left[0, 0, 0\\right]",isPrimary:!0},useComputed:{inputType:"boolean",defaultValue:!1,isPrimary:!0}},On=window.MathQuill.getInterface(2),En=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isFocused:!1},e.onEdit=function(t){var n=e.props.onEdit;n&&!e.preventOnEdit&&n(t)},e.onFocus=function(){e.setState({isFocused:!0}),e.props.onFocus&&e.props.onFocus()},e.onBlur=function(){e.setState({isFocused:!1}),e.props.onBlur&&e.props.onBlur()},e}return Object(f.a)(n,[{key:"getConfig",value:function(e){var t=n.configKeys.filter((function(t){return e[t]})).reduce((function(t,n){return t[n]=e[n],t}),{});return t.handlers={},t.handlers.edit=this.onEdit,Object.keys(n.handlerKeys).filter((function(t){return e[t]})).reduce((function(t,r){var a=n.handlerKeys[r];return t.handlers[a]=e[r],t}),t)}},{key:"componentDidMount",value:function(){var e=this.getConfig(this.props);this.mathField=On.MathField(this.span,e),this.setLatex(this.props.latex)}},{key:"setLatex",value:function(e){e!==this.mathField.latex()&&(this.preventOnEdit=!0,this.mathField.latex(this.props.latex),this.preventOnEdit=!1)}},{key:"componentDidUpdate",value:function(){this.setLatex(this.props.latex)}},{key:"render",value:function(){var e=this,t=z()(this.props.className,{"mq-editable-field":!0,"mq-math-mode":!0,"mq-focused":this.state.isFocused});return a.a.createElement("span",{onFocus:this.onFocus,onBlur:this.onBlur,style:this.props.style,className:t,ref:function(t){e.span=t}})}}]),n}(r.PureComponent);En.configKeys=["spaceBehavesLikeTab","leftRightIntoCmdGoes","restrictMismatchedBrackets","sumStartsWithNEquals","supSubsRequireOperand","charsThatBreakOutOfSupSub","autoSubscriptNumerals","autoCommands","autoOperatorNames","substituteTextarea"],En.handlerKeys={onEnter:"enter",onMoveOutOf:"moveOutOf",onDeleteOutOf:"deleteOutOf",onUpOutOf:"upOutOf",onSelectOutOf:"selectOutOf",onDownOutOf:"downOutOf"};var jn=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.staticMath=On.StaticMath(this.span)}},{key:"componentDidUpdate",value:function(){this.props.latex!==this.staticMath.latex()&&this.staticMath.latex(this.props.latex)}},{key:"render",value:function(){var e=this,t=z()(this.props.className,{"mq-math-mode":!0});return a.a.createElement("span",{style:this.props.style,className:t,ref:function(t){e.span=t}},this.props.latex)}}]),n}(r.PureComponent);function xn(){var e=Object(y.a)(["\n  &.mq-math-mode {\n    max-width: calc(100% - 30px);\n    font-size: ",";\n    font-weight:bolder;\n    ",";\n  }\n"]);return xn=function(){return e},e}function Cn(){var e=Object(y.a)(["\n  &.mq-editable-field.mq-math-mode {\n    flex:1;\n    max-width: 100%;\n    font-size: ",";\n    font-weight:bolder;\n    ",";\n    ",";\n    ",";\n  }\n"]);return Cn=function(){return e},e}function wn(){var e=Object(y.a)(["\n  align-self:stretch;\n  display: flex;\n  align-items:center;\n  padding:2px;\n"]);return wn=function(){return e},e}function kn(){var e=Object(y.a)(["\n  &, &.mq-focused {\n    border-bottom-color: red;\n  }\n"]);return kn=function(){return e},e}function Pn(){var e=Object(y.a)(["\n  border-top none;\n  border-left: none;\n  border-right: none;\n  margin-bottom:1px;\n  border-bottom-width: 1px;\n  border-bottom-color: ",";\n  &.mq-focused {\n    box-shadow:none;\n    margin-bottom: 0px;\n    border-bottom-width: 2px;\n    border-bottom-color: ","\n  };\n"]);return Pn=function(){return e},e}var Tn=Object(g.b)(Pn(),(function(e){return e.theme.gray[5]}),(function(e){return e.theme.primary[4]})),Sn=Object(g.b)(kn()),An=Object(g.b)(wn()),Rn=Object(g.c)(En)(Cn(),(function(e){return"small"===e.size?"100%":"125%"}),Tn,(function(e){return e.hasError&&Sn}),An);Rn.displayName="MathQuillStyled";var Vn=Object(g.c)(jn)(xn(),(function(e){return"small"===e.size?"100%":"125%"}),An),In=n(99),Dn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(h.a)(this,e),this.name=null,this.string=t,this.tree=Ae.parse(this._preprocess(n)),this.name=this.tree.name?this.tree.name:null,this._postprocess(r),this.dependencies=this._getDependencies(),this.eval=Object(In.a)(this._getEval(),this._getSubscopeEquality())}return Object(f.a)(e,[{key:"_preprocess",value:function(e){return e.reduce((function(e,t){return t(e)}),this.string)}},{key:"_postprocess",value:function(e){var t=this;e.forEach((function(e){t.tree.traverse((function(t){return e(t)}))}))}},{key:"_getDependencies",value:function(){var t=this,n=new Set,r="AssignmentNode"===this.tree.type,a="FunctionAssignmentNode"===this.tree.type,i=e._getRHS(this.tree),o="FunctionAssignmentNode"===this.tree.type?this.tree.params:[];return i.traverse((function(e){if("SymbolNode"!==e.type&&"FunctionNode"!==e.type||o.includes(e.name)||n.add(e.name),(r||a)&&[].concat(Object(se.a)(n),Object(se.a)(o)).includes(t.tree.name))throw Error("Cyclic Assignment Error")})),n}},{key:"_getEval",value:function(){var e=this.tree.compile();return function(t){var n=Object(o.a)({},t),r=e.eval(n);if(r instanceof Ae.type.DenseMatrix)return r.toArray();if(r instanceof Function){var a=function(){var e;return(e=r.length>1&&1===arguments.length&&Array.isArray(arguments.length<=0?void 0:arguments[0])?r.apply(void 0,Object(se.a)(arguments.length<=0?void 0:arguments[0])):r.apply(void 0,arguments))instanceof Ae.type.DenseMatrix?e.toArray():e};return Object.defineProperty(a,"length",{value:r.length}),Object.defineProperty(a,"name",{value:r.name}),a}return r}}},{key:"_getSubscopeEquality",value:function(){var e=this;return function(t,n){var r,a=Object(Oe.a)(e.dependencies);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(void 0===t[i]&&void 0===Ae[i])return!1;if(t[i]!==n[i])return!1}}catch(o){a.e(o)}finally{a.f()}return!0}}}],[{key:"_getRHS",value:function(e){return"AssignmentNode"===e.type?e.value:"FunctionAssignmentNode"===e.type?e.expr:e}}]),e}();function _n(e,t){var n,r=Object(Oe.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.add(a)}}catch(i){r.e(i)}finally{r.f()}return e}var Nn,Mn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e._defaultPreprocessors,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e._defaultPostprocessors;Object(h.a)(this,e),this._cache={},this._preprocessors=[],this._postprocessors=[],this._preprocessors=t,this._postprocessors=n}return Object(f.a)(e,[{key:"parse",value:function(e){void 0===this._cache[e]&&this.addToCache(e);var t=this._cache[e],n=t.parsed,r=t.error;if(n)return n;throw r}},{key:"addToCache",value:function(e){try{this._cache[e]={parsed:new Dn(e,this._preprocessors,this._postprocessors),error:null}}catch(t){this._cache[e]={parsed:null,error:t}}}}]),e}();Mn._defaultPreprocessors=[function(e){var t=function e(t){var n=t.indexOf("_{");if(n<0)return t;var r=n+"_{".length,a=t.indexOf("}",r),i=t.slice(0,n)+"_"+t.slice(r,a)+t.slice(a+1);return e(i)}(function e(t){var n=t.indexOf("\\frac"),r=n+"\\frac".length;if(n<0)return t;var a=gt(t,r),i=t.slice(0,n)+t.slice(r,a+1)+"/"+t.slice(a+1);return e(i)}(e));return[{tex:"\\operatorname{diff}",mathjs:"diff"},{tex:"\\operatorname{pdiff}",mathjs:"pdiff"},{tex:"\\operatorname{curl}",mathjs:"curl"},{tex:"\\operatorname{div}",mathjs:"div"},{tex:"\\operatorname{norm}",mathjs:"norm"},{tex:"\\operatorname{mod}",mathjs:"mod"},{tex:"\\operatorname{abs}",mathjs:"abs"},{tex:"\\operatorname{unitT}",mathjs:"unitT"},{tex:"\\operatorname{unitN}",mathjs:"unitN"},{tex:"\\operatorname{unitB}",mathjs:"unitB"},{tex:"\\operatorname{arccosh}",mathjs:"arccosh"},{tex:"\\operatorname{arcsinh}",mathjs:"arcsinh"},{tex:"\\operatorname{arctanh}",mathjs:"arctanh"},{tex:"\\cdot",mathjs:" * "},{tex:"\\left",mathjs:""},{tex:"\\right",mathjs:""},{tex:"{",mathjs:"("},{tex:"}",mathjs:")"},{tex:"~",mathjs:" "},{tex:"\\",mathjs:" "}].reduce((function(e,t){return yt(e,t.tex,t.mathjs)}),t)},(Nn=["diff","unitT","unitN","unitB"],function(e){return Nn.reduce((function(e,t){return function e(t,n){var r=(t=function(e,t){return e.replace(new RegExp("".concat(bt(t),"\\s+\\(")),"".concat(t,"(")).replace(/\)\s+\(/g,")(")}(t,n)).indexOf(n);if(r<0)return t;var a=r+n.length,i=gt(t,a);if("("!==t[i+1])t=t.slice(0,r)+"PLACEHOLDER"+t.slice(a,t.length);else{var o=i+1;t=t.slice(0,r)+"PLACEHOLDER"+t.slice(a,i)+","+t.slice(o+1,t.length)}return t.indexOf(n)<0?yt(t,"PLACEHOLDER",n):e(t,n)}(e,t)}),e)})],Mn._defaultPostprocessors=[function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];if(!Ae.hasOwnProperty(a))throw Error("math['".concat(a,"'] does not exist. (ExpressionTree Operators can only be reassigned to functions within the math (mathjs) namespace.)"))}return function(t){"OperatorNode"===t.type&&e.hasOwnProperty(t.op)&&(t.fn=e[t.op])}}({"|":"dot","&":"cross"})];var Ln=n(232),Fn=n.n(Ln),zn=n(356),Un=n.n(zn),Bn=new Set(Object.keys(Ae));function Hn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=Yn(t,e),i=Xn(t,a,r),s=i.evalOrder,c=i.cycles,l=Object.keys(c).reduce((function(e,t){var n=c[t].join(", ");return e[t]=Error("Symbol ".concat(t," has cyclic dependencies: ").concat(n)),e}),{}),u={scope:Object(o.a)({},n),errors:l},d=s.reduce((function(n,r){try{n.scope[r]=e.parse(t[r]).eval(n.scope)}catch(a){n.errors[r]=a}return n}),u);return Gn(e,t,s,d)}function Gn(e,t,n,r){return n.filter((function(e){return"function"===typeof r.scope[e]})).reduce((function(n,r){var a=e.parse(t[r]).dependencies,i=Object(se.a)(a).filter((function(e){return void 0===n.scope[e]}));if(i.length>0){delete n.scope[r];var o=i.join(", ");n.errors[r]=Error("Eval Error: Depends on undefined symbol(s) ".concat(o))}return n}),r)}function Xn(e,t){var n,r,a,i,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=s?Object(se.a)(qn(s,t)):Object.keys(t);try{var l=Zn(t,c);a=l.edges,r=l.isolated,n=Fn()(a),i={}}catch(h){if(!h.message.startsWith("Cyclic dependency"))throw h;var u=Wn(t);o=u.withoutCycles,i=u.cycles;var d=Zn(o,c.filter((function(e){return!i.hasOwnProperty(e)})));a=d.edges,r=d.isolated,n=Fn()(a)}var p=[].concat(Object(se.a)(n),Object(se.a)(r));return{evalOrder:p,cycles:i}}function Zn(e,t){var n=new Set,r=t.reduce((function(t,r){0===e[r].size&&t.childless.push(r);var a,i=Object(Oe.a)(e[r]);try{for(i.s();!(a=i.n()).done;){var o=a.value;t.edges.push([r,o]),n.add(o)}}catch(s){i.e(s)}finally{i.f()}return t}),{edges:[],childless:[]});return{edges:r.edges,isolated:r.childless.filter((function(e){return!n.has(e)}))}}function Wn(e){for(var t=new Un.a,n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];t.add(a,Object(se.a)(e[a]))}var i=t.getStronglyConnectedComponents().filter((function(e){return e.length>1||e[0].successors.includes(e[0])})),o={};i.forEach((function(e){var t=e.map((function(e){return e.name}));t.sort(),e.forEach((function(e){o[e.name]=t}))}));var s=new Set(Object.keys(o));return{withoutCycles:Object.keys(e).reduce((function(t,n){if(s.has(n))return t;var r=Object(se.a)(e[n]).filter((function(e){return!s.has(e)}));return t[n]=new Set(r),t}),{}),cycles:o}}function Yn(e,t){var n=Object.keys(e).reduce((function(e,t){return e[t]=new Set,e}),{});return Object.keys(e).reduce((function(n,r){var a=e[r],i=t.parse(a).dependencies;return i.forEach((function(t){Bn.has(t)&&!e[t]&&i.delete(t)})),i.forEach((function(e){n[e]&&n[e].add(r)})),n}),n)}function qn(e,t){var n=new Set;return e.forEach((function(e){_n(n,function e(t,n){var r=new Set([t]);return 0===n[t].size||n[t].forEach((function(t){_n(r,e(t,n))})),r}(e,t))})),n}var Jn=function(){function e(t){Object(h.a)(this,e),this._oldResult={scope:{},scopeDiff:{unchanged:[],updated:[],added:[],deleted:[]},errors:{},errorsDiff:{unchanged:[],updated:[],added:[],deleted:[]}},this._oldSymbols={},this._parser=t}return Object(f.a)(e,[{key:"evalScope",value:function(t){if(t===this._oldSymbols)return this._oldResult;var n=e._detectChanges(t,this._oldSymbols),r=n.updatesOnly,a=n.changed,i=r?this._patchScope(t,a):this._recalculateScope(t);return this._updateState(t,i),i}},{key:"_patchScope",value:function(e,t){var n=this,r=Hn(this._parser,e,this._oldResult.scope,t),a=r.scope,i=r.errors,o=Object.keys(this._oldResult.errors).filter((function(e){return!a[e]&&!i[e]})).reduce((function(e,t){return e[t]=n._oldResult.errors[t],e}),i);return{scope:a,errors:o,scopeDiff:ze()(this._oldResult.scope,a),errorsDiff:ze()(this._oldResult.errors,o)}}},{key:"_recalculateScope",value:function(e){var t=Hn(this._parser,e),n=t.scope,r=t.errors;return{scope:n,errors:r,scopeDiff:ze()(this._oldResult.scope,n),errorsDiff:ze()(this._oldResult.errors,r)}}},{key:"_updateState",value:function(e,t){this._oldSymbols=e,this._oldResult=t}}],[{key:"_detectChanges",value:function(e,t){var n=ze()(e,t),r=n.added,a=n.deleted,i=n.updated;return{updatesOnly:0===r.length&&0===a.length,changed:i}}}]),e}(),$n=new Mn,Kn=new Jn($n);window.parser=$n;var Qn=/\s\(char.*\)/g;function er(e,t){try{var n=e.parse("__=".concat(t)).tree;return"AssignmentNode"===n.type||"FunctionAssignmentNode"===n.type?"AssignmentNode"===n.value.type||"FunctionAssignmentNode"===n.value.type?new K("Parse Error: Unexpected assignment"):new K(null):new K("Parse Error: Invalid right-hand side.")}catch(a){var r="Parse Error: ".concat(a.message.replace(Qn,""));return new K(r)}}var tr=n(116);function nr(){var e=Object(y.a)(["\n  min-height: 45px;\n  width: 250px;\n"]);return nr=function(){return e},e}function rr(){var e=Object(y.a)(["\n  flex:1;\n  align-self:stretch;\n  display: flex;\n"]);return rr=function(){return e},e}var ar=g.c.div(rr()),ir=g.c.div(nr()),or=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={isFocused:!1,isPersistentError:!1},a._containerRef=r.createRef(),a.getContainerRef=a.getContainerRef.bind(Object(m.a)(a)),a.onEdit=a.onEdit.bind(Object(m.a)(a)),a.onFocus=a.onFocus.bind(Object(m.a)(a)),a.onBlur=a.onBlur.bind(Object(m.a)(a)),a}return Object(f.a)(n,[{key:"getContainerRef",value:function(){if(null===document.body)throw new Error("document.body is null.");return this._containerRef.current||document.body}},{key:"onEdit",value:function(e){var t=this.props.prefix,n=e.latex(),r=this.validateSelf(n);this.props.onValidatedTextChange(t+n,r)}},{key:"onFocus",value:function(){this.setState({isFocused:!0})}},{key:"onBlur",value:function(){this.setState({isFocused:!1})}},{key:"handleErrorPersistence",value:function(){var e=Object(ve.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return this.setState({isPersistentError:!1}),this._errorId=null,e.abrupt("return");case 4:if(!this.state.isPersistentError){e.next=6;break}return e.abrupt("return");case 6:return n=Symbol("Error Identifier"),this._errorId=n,e.next=10,be(this.props.displayErrorDelay);case 10:n===this._errorId&&this._errorId&&this.setState({isPersistentError:!0});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"displayErrorNow",value:function(e){var t=Boolean(e);this._errorId=t?Symbol("Error Identifier"):null,this.setState({isPersistentError:t})}},{key:"validateSelf",value:function(e){var t=this.props,r=t.validators,a=t.validateAgainst,i=t.parser,o=t.allowEmpty;return n.validate(r,i,e,a,o)}},{key:"componentDidMount",value:function(){var e=this.props.latex,t=this.validateSelf(e);t.errorMsg!==this.props.errorMsg&&(this.props.onValidatorAndErrorChange(t),this.handleErrorPersistence(t.errorMsg)),t.errorMsg&&this.displayErrorNow(t.errorMsg),this.forceUpdate()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.validators,r=t.validateAgainst,a=t.latex,i=t.errorMsg;if(n!==e.validators||r!==e.validateAgainst){var o=this.validateSelf(a);o.errorMsg!==this.props.errorMsg&&(this.props.onValidatorAndErrorChange(o),this.handleErrorPersistence(o.errorMsg))}i!==e.errorMsg&&this.handleErrorPersistence(i)}},{key:"render",value:function(){var e=this.state,t=e.isPersistentError,n=e.isFocused;return r.createElement(ar,{className:this.props.className,style:this.props.style,ref:this._containerRef},r.createElement(tr.a,{getPopupContainer:this.getContainerRef,visible:t&&n,title:r.createElement(ir,null,this.props.errorMsg),trigger:"click",placement:"topLeft"}),r.createElement(Rn,{onFocus:this.onFocus,onBlur:this.onBlur,style:this.props.style,hasError:t,latex:this.props.latex,onEdit:this.onEdit,size:this.props.size,autoCommands:"sqrt pi theta phi",autoOperatorNames:"diff pdiff curl div unitT unitN unitB cosh sinh tanh arccosh arcsinh arctanh cos sin tan sec csc cot arcsin arccos arctan log ln exp mod abs norm max min"}))}}],[{key:"validate",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(a&&""===n.trim())return new K(null);var i,o=Object(Oe.a)(e);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=s(t,n,r);if(c.isError)return c}}catch(l){o.e(l)}finally{o.f()}return new K(null)}}]),n}(r.PureComponent);function sr(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s[e]&&s[e][t])return s[e][t]}}or.defaultProps={parser:$n,validators:[er],displayErrorDelay:1500,size:"large",prefix:"",allowEmpty:!1};var cr=n(144),lr=n.n(cr);function ur(e,t,n){var r,a=Object(Oe.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i[t])return i[t][n]}}catch(o){a.e(o)}finally{a.f()}throw Error("id ".concat(t," not found in ").concat(e))}var dr=lr()((function(e,t,n){return e}),(function(e,t,n){return t}),(function(e,t,n){return n}),(function(e,t,n){return function(e,t,n){return new Set(Object.keys(t).filter((function(e){return e!==n})).map((function(n){try{return e.parse(t[n].name).name}catch(r){return null}})).filter((function(e){return null!==e})))}(e,t,n)}))((function(e,t,n){return n})),pr=lr()((function(e,t,n){return e}),(function(e,t,n){return t}),(function(e,t,n){return n}),(function(e,t,n){return{usedNames:dr(e,t,n),latexRHS:t[n].value}}))((function(e,t,n){return n})),hr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).onValidatedTextChange=r.onValidatedTextChange.bind(Object(m.a)(r)),r.onValidatorAndErrorChange=r.onValidatorAndErrorChange.bind(Object(m.a)(r)),r}return Object(f.a)(n,[{key:"onValidatedTextChange",value:function(e,t){var n=this.props,r=n.parentId,a=n.type,i=n.postProcessLaTeX,o=n.field,s=i(e);this.props.onValidatedTextChange(r,a,o,s,t)}},{key:"onValidatorAndErrorChange",value:function(e){var t=this.props,n=t.parentId,r=t.field;this.props.onValidatorAndErrorChange(n,r,e)}},{key:"render",value:function(){var e=this.props,t=(e.onValidatorAndErrorChange,e.onValidatedTextChange,e.parentId,e.type,e.field),r=Object(s.a)(e,["onValidatorAndErrorChange","onValidatedTextChange","parentId","type","field"]);return a.a.createElement(or,Object.assign({},r,{field:t,style:n.style,validators:n.validators,onValidatedTextChange:this.onValidatedTextChange,onValidatorAndErrorChange:this.onValidatorAndErrorChange}))}}]),n}(r.PureComponent);hr.style={flex:0},hr.validators=[function(e,t){try{var n=e.parse("".concat(t,"=1")).tree.type;return new K("AssignmentNode"===n||"FunctionAssignmentNode"===n?null:"Parse Error: invalid symbol name.")}catch(a){var r="Parse Error: ".concat(a.message.replace(Qn,""));return new K(r)}},function(e,t,n){var r=n.usedNames,a=e.parse(t).name;if(void 0===a)throw Error("Unexpected Error: Expression ".concat(t," does not have a name."));return r.has(a)?new K("Name Error: name '".concat(a,"' is used more than once.")):new K(null)},function(e,t,n){var r=n.latexRHS;if(!er(e,r).isValid)return new K(null);try{return e.parse(t+"="+r),new K(null)}catch(i){var a="Parse Error: ".concat(i.message.replace(Qn,""));return new K(a)}}],hr.defaultProps={postProcessLaTeX:function(e){return e},field:"name"};var fr={onValidatedTextChange:ae,onValidatorAndErrorChange:te},mr=Object(Xt.b)((function(e,t){var n=e.mathSymbols,r=e.parseErrors,a=e.evalErrors,i=e.renderErrors,o=t.parentId;return{type:ur([n],o,"type"),latex:t.latex?t.latex:n[o].name,errorMsg:sr(o,"name",r,a,i),validateAgainst:pr($n,n,o)}}),fr)(hr),vr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).onValidatedTextChange=r.onValidatedTextChange.bind(Object(m.a)(r)),r.onValidatorAndErrorChange=r.onValidatorAndErrorChange.bind(Object(m.a)(r)),r}return Object(f.a)(n,[{key:"onValidatedTextChange",value:function(e,t){var n=this.props,r=n.parentId,a=n.type,i=n.postProcessLaTeX,o=n.field,s=i(e);this.props.onValidatedTextChange(r,a,o,s,t)}},{key:"onValidatorAndErrorChange",value:function(e){var t=this.props,n=t.parentId,r=t.field;this.props.onValidatorAndErrorChange(n,r,e)}},{key:"render",value:function(){var e=this.props,t=(e.onValidatorAndErrorChange,e.onValidatedTextChange,e.parentId,e.type,Object(s.a)(e,["onValidatorAndErrorChange","onValidatedTextChange","parentId","type"]));return r.createElement(or,Object.assign({},t,{onValidatedTextChange:this.onValidatedTextChange,onValidatorAndErrorChange:this.onValidatorAndErrorChange}))}}]),n}(r.PureComponent);vr.defaultProps={postProcessLaTeX:function(e){return e}};var br={onValidatedTextChange:ae,onValidatorAndErrorChange:te},yr=Object(Xt.b)((function(e,t){var n=e.mathGraphics,r=e.mathSymbols,a=e.parseErrors,i=e.evalErrors,o=e.renderErrors,s=t.parentId,c=t.field,l=t.prefix,u=t.latex?t.latex:ur([n,r],s,c),d=l&&u.startsWith(l)?u.slice(l.length):u;return{type:ur([n,r],s,"type"),latex:d,errorMsg:sr(s,c,a,i,o)}}),br)(vr),gr=Object(Xt.b)((function(e,t){var n=e.mathSymbols;return{latex:ur([e.mathGraphics,n],t.parentId,t.field)}}))(Vn),Or=n(941),Er=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;Object(h.a)(this,n),r=t.call(this,e);var a=e.parentId,i=e.type,o=e.field;return r.onChange=r.props.setProperty.bind(Object(m.a)(r),a,i,o),r}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.parentId,e.type,e.field,e.disabledField,e.setProperty,Object(s.a)(e,["parentId","type","field","disabledField","setProperty"]));return r.createElement(Or.a,Object.assign({onChange:this.onChange},t))}}]),n}(r.PureComponent);Er.defaultProps={disabled:!1};var jr={setProperty:re},xr=Object(Xt.b)((function(e,t){var n=e.mathGraphics,r=t.field,a=t.parentId,i=t.disabledField,c=t.disabled,l=Object(s.a)(t,["field","parentId","disabledField","disabled"]),u="boolean"===typeof c?c:n[a][i];return Object(o.a)({checked:n[a][r],type:n[a].type,disabled:u},l)}),jr)(Er);function Cr(){var e=Object(y.a)(["\n  padding-left:5px;\n  padding-right:5px;\n"]);return Cr=function(){return e},e}function wr(){var e=Object(y.a)(["\n  display: flex;\n  flex: 1;\n  align-items:center;\n"]);return wr=function(){return e},e}function kr(){var e=Object(y.a)(["\n  position:relative;\n  display:flex;\n  align-items:stretch;\n"]);return kr=function(){return e},e}var Pr=g.c.div(kr()),Tr=g.c.div(wr()),Sr=g.c.span(Cr()),Ar=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){var n=e.props,r=n.parentId,a=n.type;e.props.setProperty(r,a,"isZoomEnabled",!t),e.props.setProperty(r,a,"isRotateEnabled",!t),e.props.setProperty(r,a,"isPanEnabled",!1),e.props.setProperty(r,a,"useComputed",t)},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.parentId,e.type,e.setProperty,Object(s.a)(e,["parentId","type","setProperty"]));return r.createElement(Or.a,Object.assign({onChange:this.onChange},t))}}]),n}(r.PureComponent),Rr={setProperty:re},Vr=Object(Xt.b)((function(e,t){var n=e.mathGraphics,r=t.parentId,a=Object(s.a)(t,["parentId"]);return Object(o.a)({checked:n[r].useComputed,type:n[r].type},a)}),Rr)(Ar);function Ir(){var e=Object(y.a)(["\n  padding-left:20px;\n  padding-right:30px;\n"]);return Ir=function(){return e},e}var Dr=Object(g.c)(Pr)(Ir()),_r=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.id;return a.a.createElement(Jt,{type:"CAMERA",id:e,metadata:gn,isDeleteable:!1},a.a.createElement(Pr,null,a.a.createElement(Tr,null,a.a.createElement(Sr,null,"User-Controlled Camera:"))),a.a.createElement(Dr,null,a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Rotate:"),a.a.createElement(xr,{parentId:e,field:"isRotateEnabled",disabledField:"useComputed",size:"small",checkedChildren:"on",unCheckedChildren:"off"})),a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Zoom:"),a.a.createElement(xr,{parentId:e,field:"isZoomEnabled",disabledField:"useComputed",size:"small",checkedChildren:"on",unCheckedChildren:"off"})),a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Pan:"),a.a.createElement(xr,{parentId:e,field:"isPanEnabled",disabledField:"useComputed",size:"small",checkedChildren:"on",unCheckedChildren:"off"}))),a.a.createElement(Pr,null,a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Computed Camera:"),a.a.createElement(Vr,{parentId:e,size:"small",checkedChildren:"on",unCheckedChildren:"off"}))),a.a.createElement(Dr,null,a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Position:"),a.a.createElement(yr,{parentId:this.props.id,field:"computedPosition"}))),a.a.createElement(Dr,null,a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Look At:"),a.a.createElement(yr,{parentId:this.props.id,field:"computedLookAt"}))),a.a.createElement(Pr,null,a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Use Orthographic Projection:"),a.a.createElement(xr,{parentId:e,field:"isOrthographic",size:"small",checkedChildren:"on",unCheckedChildren:"off"}))))}}]),n}(r.PureComponent),Nr=new Ot({type:"CAMERA",metadata:gn,uiComponent:_r,mathboxComponent:rt});function Mr(e){return{x:e.clientX,y:e.clientY}}var Lr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).isLongPressing=!1,e.startingPosition={x:0,y:0},e.onPointerUp=function(t){e.timerID&&e.clearLongPressTimer();var n=Mr(t);e.isLongPressing||e.exceedDragThreshold(n)?e.isLongPressing=!1:e.props.onShortPress()},e.onPointerDown=function(t){e.props.primaryMouseButtonOnly&&"mouse"===t.pointerType&&0!==t.button||(e.startingPosition=Mr(t),e.timerID=setTimeout((function(){e.isLongPressing=!0,e.props.onLongPress()}),e.props.longPressTime))},e.onPointerMove=function(t){var n=Mr(t);e.timerID&&e.exceedDragThreshold(n)&&e.clearLongPressTimer()},e.onPointerLeave=function(){e.timerID&&e.clearLongPressTimer()},e.onTouchStart=function(t){e.onPointerDown(t),t.preventDefault()},e.onTouchMove=function(t){e.onPointerMove(t)},e.onTouchEnd=function(t){e.onPointerUp(t),t.preventDefault()},e}return Object(f.a)(n,[{key:"clearLongPressTimer",value:function(){clearTimeout(this.timerID),this.timerID=null}},{key:"exceedDragThreshold",value:function(e){return t=this.startingPosition,n=e,Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))>this.props.dragThreshold;var t,n}},{key:"render",value:function(){return a.a.createElement("div",{onMouseUp:this.onPointerUp,onMouseDown:this.onPointerDown,onMouseMove:this.onPointerMove,onMouseOut:this.onPointerLeave,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,className:"math3d-longpressable"},this.props.children)}}]),n}(a.a.PureComponent);Lr.defaultProps={longPressTime:500,primaryMouseButtonOnly:!0,dragThreshold:100};var Fr=n(943),zr=n(942);function Ur(){var e=Object(y.a)(["\n  ",";\n  background-color: ",";\n  border-radius: 5px;\n  width: 30px;\n  height: 30px;\n  cursor: pointer;\n  &:hover {\n    border: 1px solid black;\n  }\n"]);return Ur=function(){return e},e}var Br=g.c.div(Ur(),(function(e){return We[e.color]?We[e.color].css:"background-color: ".concat(e.color)}),(function(e){return e.color})),Hr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).pickColor=function(){e.props.onPickColor(e.props.color)},e}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Br,{style:this.props.style,className:this.props.className,color:this.props.color,onClick:this.pickColor})}}]),n}(a.a.PureComponent);function Gr(){var e=Object(y.a)(["\n  display: grid;\n  grid-template-columns: repeat(5, 30px);\n  grid-auto-rows: 30px;\n  grid-gap: 5px;\n"]);return Gr=function(){return e},e}var Xr=g.c.div(Gr()),Zr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onPickColor=function(t){e.props.onPickColor(t)},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement(Xr,null,this.props.colors.map((function(t){return a.a.createElement(Hr,{color:t,onPickColor:e.onPickColor,key:t})})))}}]),n}(a.a.Component);Zr.defaultProps={colors:Ze};var Wr=Fr.a.TabPane,Yr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).handleVisibleChange=function(e){e||a.props.onHideColorPicker()},a._containerRef=r.createRef(),a.getContainerRef=a.getContainerRef.bind(Object(m.a)(a)),a}return Object(f.a)(n,[{key:"getContent",value:function(){return this.props.extraTabs?r.createElement(Fr.a,null,r.createElement(Wr,{tab:"Colors",key:"colors"},r.createElement(Zr,{colors:this.props.colors,onPickColor:this.props.onPickColor})),this.props.extraTabs):r.createElement(Zr,{colors:this.props.colors,onPickColor:this.props.onPickColor})}},{key:"getContainerRef",value:function(){if(null===document.body)throw new Error("document.body is null.");return this._containerRef.current||document.body}},{key:"render",value:function(){return r.createElement("div",{style:{position:"relative"},ref:this._containerRef},r.createElement(zr.a,{placement:"right",trigger:"click",content:this.getContent(),visible:this.props.visible,onVisibleChange:this.handleVisibleChange,getPopupContainer:this.getContainerRef},this.props.children))}}]),n}(r.Component);function qr(){var e=Object(y.a)(["\n  width: 26px;\n  height: 26px;\n  border-radius: 26px;\n  background-color: ",";\n  display: flex;\n  justify-content: center;\n  align-items:center;\n  pointer-events:none;\n"]);return qr=function(){return e},e}function Jr(){var e=Object(y.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius:30px;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items:center;\n  cursor: pointer;\n  background-color: ",";\n  ",";\n"]);return Jr=function(){return e},e}var $r=g.c.div(Jr(),(function(e){return e.color}),(function(e){return e.gradient})),Kr=g.c.div(qr(),(function(e){return e.isFilled?"rgba(0, 0, 0, 0)":"white"})),Qr=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={displayColorPicker:!1},e.showColorPicker=function(){e.setState({displayColorPicker:!0})},e.hideColorPicker=function(){e.setState({displayColorPicker:!1})},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props.color,t=We[e]&&We[e].css;return r.createElement(Yr,{extraTabs:this.props.extraTabs,colors:this.props.colors,color:e,visible:this.state.displayColorPicker,onPickColor:this.props.onPickColor,onHideColorPicker:this.hideColorPicker},r.createElement(Lr,{onLongPress:this.showColorPicker,onShortPress:this.props.onToggleVisibility},r.createElement($r,{color:e,gradient:t},r.createElement(Kr,{isFilled:this.props.isFilled}))))}}]),n}(r.PureComponent),ea=a.a.createContext(),ta=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.errors,r=t.idsByName,a=t.setError,i=t.errorsDiff,o=t.allSymbolIds,s=new Set(o),c=e.idsByName;i.deleted.filter((function(e){return s.has(c[e])})).forEach((function(e){var t=new Q(null);a(c[e],"value",t)})),[].concat(Object(se.a)(i.added),Object(se.a)(i.updated)).forEach((function(e){var t=new Q(n[e].message);a(r[e],"value",t)}))}},{key:"render",value:function(){var e=this.props,t=e.scope,n=e.scopeDiff;return a.a.createElement(ea.Provider,{value:{scope:t,scopeDiff:n}},this.props.children)}}]),n}(r.PureComponent),na=ea.Consumer,ra={type:"VARIABLE_SLIDER",name:"T",value:null,min:"-5",max:"5",description:"Variable Slider",isAnimating:!1,speedMultiplier:1},aa={flex:0,width:"50px"};function ia(e){return a.a.createElement(r.Fragment,null,a.a.createElement(mr,{parentId:e.parentId}),a.a.createElement(Vn,{latex:"="}),a.a.createElement(yr,{field:"value",style:aa,parentId:e.parentId,latex:e.valueText}))}var oa=n(944);function sa(e,t,n){return Object.keys(t).reduce((function(r,a){try{var i=e.parse(t[a]);try{return r.evaluated[a]=i.eval(n),r}catch(o){return r.evalErrors[a]=o,r}}catch(s){return r.parseErrors[a]=s,r}}),{evalErrors:{},evaluated:{},parseErrors:{}})}function ca(e,t,n,r){Object.keys(n).forEach((function(n){void 0===t[n]&&r(e,n,new Q(null))})),Object.keys(t).forEach((function(n){var a=t[n].message;r(e,n,new Q(a))}))}var la=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).state={min:-10,max:-10,value:0},r.incrementByFraction=r.incrementByFraction.bind(Object(m.a)(r)),r}return Object(f.a)(n,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.parser,r=e.parentId,a=e.scope,i=e.ownEvalErrors,s=e.setError,c=sa(n,{min:e.min,max:e.max,value:e.value},a),l=c.evaluated,u=c.evalErrors;Object.keys(l).forEach((function(e){"number"!==typeof l[e]&&(delete l[e],u[e]=TypeError("'".concat(e,"' must be a number.")))}));var d=Object(o.a)(Object(o.a)({},t),l);return d.min>d.max?(u.min=u.min||TypeError("Range Error: 'min' (".concat(d.min,") cannot be greater than  'max' (").concat(d.max,")")),u.max=u.max||TypeError("Range Error: 'max' (".concat(d.max,") cannot be less than 'min' (").concat(d.min,")")),delete d.min,delete d.max):d.min===d.max&&(u.min=u.min||TypeError("Range Error: 'min' (".concat(d.min,") cannot equal 'max' (").concat(d.max,")")),u.max=u.max||TypeError("Range Error: 'max' (".concat(d.max,") cannot equal 'min' (").concat(d.min,")")),delete d.min,delete d.max),ca(r,u,i,s),d}}]),Object(f.a)(n,[{key:"incrementByFraction",value:function(e){var t=this.state,n=t.min,r=t.max,a=t.value+(r-n)*e;a<r?this.props.onSliderChange(a):this.props.onSliderChange(n)}},{key:"render",value:function(){var e=this.state,t=e.min,n=e.max,r=e.value,i=(n-t)/100;return a.a.createElement("div",{style:{flex:1}},a.a.createElement(oa.a,{min:t,max:n,tipFormatter:null,value:r,step:i,onChange:this.props.onSliderChange}))}}]),n}(r.PureComponent);la.computedProps=["min","max","value"];var ua,da=n(59);function pa(){var e=Object(y.a)(["\n  border-color: ",";\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  & i {\n    color: ",";\n    font-size:100%;\n  }\n"]);return pa=function(){return e},e}function ha(){var e=Object(y.a)(["\n  display: flex;\n  flex: 1;\n  align-items:center;\n  justify-content: space-around;\n"]);return ha=function(){return e},e}window.timers={};var fa=g.c.div(ha()),ma=Object(g.c)(da.a)(pa(),(function(e){return e.theme.gray[2]}),(function(e){return e.theme.gray[5]}),(function(e){return e.theme.gray[5]})),va={cursor:"default"},ba={display:"flex"},ya=[1/16,1/8,1/4,.5,3/4,1,1.5,2,3,4,8],ga=(ua={},Object(u.a)(ua,1/16,"1/16"),Object(u.a)(ua,1/8,"1/8"),Object(u.a)(ua,1/4,"1/4"),Object(u.a)(ua,.5,"1/2"),Object(u.a)(ua,3/4,"3/4"),Object(u.a)(ua,"1","1"),Object(u.a)(ua,"1.5","1.5"),Object(u.a)(ua,"2","2"),Object(u.a)(ua,"3","3"),Object(u.a)(ua,"4","4"),Object(u.a)(ua,"8","8"),ua),Oa=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).startAnimation=r.startAnimation.bind(Object(m.a)(r)),r.stopAnimation=r.stopAnimation.bind(Object(m.a)(r)),r.incrementSpeed=r.incrementSpeed.bind(Object(m.a)(r)),r.decrementSpeed=r.decrementSpeed.bind(Object(m.a)(r)),r}return Object(f.a)(n,[{key:"startAnimation",value:function(){this.props.setProperty("isAnimating",!0);var e=this.props,t=e.baseAnimationDuration,n=1/e.fps,r=1e3*n,a=n/(t/e.speedMultiplier),i=this.props.incrementByFraction;this._interval=setInterval((function(){return i(a)}),r)}},{key:"stopAnimation",value:function(){this.props.setProperty("isAnimating",!1),clearInterval(this._interval)}},{key:"canIncrement",value:function(){return this.props.speedMultiplier!==ya[ya.length-1]}},{key:"incrementSpeed",value:function(){var e=ya.indexOf(this.props.speedMultiplier),t=Math.min(e+1,ya.length),n=ya[t];this.props.setProperty("speedMultiplier",n),this.props.isAnimating&&(this.stopAnimation(),this.startAnimation())}},{key:"canDecrement",value:function(){return this.props.speedMultiplier!==ya[0]}},{key:"decrementSpeed",value:function(){var e=ya.indexOf(this.props.speedMultiplier),t=Math.max(e-1,0),n=ya[t];this.props.setProperty("speedMultiplier",n),this.props.isAnimating&&(this.stopAnimation(),this.startAnimation())}},{key:"componentDidMount",value:function(){this.props.isAnimating&&this.startAnimation()}},{key:"componentWillUnmount",value:function(){clearInterval(this._interval)}},{key:"render",value:function(){var e=this,t=this.props.speedMultiplier;return a.a.createElement(fa,null,a.a.createElement(ma,{shape:"circle",size:"small",value:this.props.isAnimating,onClick:function(t){"false"===t.currentTarget.value?e.startAnimation():e.stopAnimation()}},a.a.createElement(O.a,{type:this.props.isAnimating?"pause":"caret-right"})),a.a.createElement(da.a.Group,{size:"small",style:ba},a.a.createElement(ma,{onClick:this.decrementSpeed,disabled:!this.canDecrement()},a.a.createElement(O.a,{type:"backward"})),a.a.createElement(ma,{disabled:!0,style:va},ga[t],a.a.createElement(O.a,{type:"close",style:{fontSize:"75%"}})),a.a.createElement(ma,{onClick:this.incrementSpeed,disabled:!this.canIncrement()},a.a.createElement(O.a,{type:"forward"}))),a.a.createElement(da.a.Group,{size:"small",style:ba},a.a.createElement(ma,{onClick:function(){return e.props.incrementByFraction(-.01)}},a.a.createElement(O.a,{type:"minus"})),a.a.createElement(ma,{onClick:function(){return e.props.incrementByFraction(.01)}},a.a.createElement(O.a,{type:"plus"}))))}}]),n}(r.PureComponent);Oa.defaultProps={fps:60,baseAnimationDuration:4};var Ea={flex:0},ja=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).setProperty=r.setProperty.bind(Object(m.a)(r)),r.onSliderChange=r.onSliderChange.bind(Object(m.a)(r)),r.renderSlider=r.renderSlider.bind(Object(m.a)(r)),r}return Object(f.a)(n,[{key:"setProperty",value:function(e,t){this.props.setProperty(this.props.id,"VARIABLE_SLIDER",e,t)}},{key:"onSliderChange",value:function(e){var t=this.props,n=t.id,r=null!==t.manualValue;this.props.setSliderValue(n,e,r)}},{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.id,r=e.value,i=e.manualValue,o=n.getLaTeX(i,r,2);return a.a.createElement(Jt,{id:t,type:"VARIABLE_SLIDER"},a.a.createElement(Pr,null,a.a.createElement(ia,{parentId:t,valueText:o}),this._evaluatedSlider&&a.a.createElement(Oa,{setProperty:this.setProperty,isAnimating:this.props.isAnimating,speedMultiplier:this.props.speedMultiplier,incrementByFraction:this._evaluatedSlider.incrementByFraction})),a.a.createElement(Pr,null,a.a.createElement(yr,{parentId:t,style:Ea,field:"min"}),a.a.createElement(na,null,this.renderSlider),a.a.createElement(yr,{parentId:t,style:Ea,field:"max"})))}},{key:"renderSlider",value:function(e){var t=this,r=e.scope,i=this.props,o=i.manualValue,s=i.value,c=n.getLaTeX(o,s);return a.a.createElement(la,{ref:function(e){t._evaluatedSlider=e},parentId:this.props.id,value:c,min:this.props.min,max:this.props.max,onSliderChange:this.onSliderChange,scope:r,parser:$n,ownEvalErrors:this.props.ownEvalErrors,setError:this.props.setError})}}],[{key:"getLaTeX",value:function(e,t,n){return null!==e&&void 0!==e?e:n?t.toFixed(n):t.toString()}}]),n}(r.PureComponent);ja.defaultProps={isAnimating:!1,fps:30,baseAnimationDuration:4,speedMultiplier:1};var xa=new ce({type:"VARIABLE_SLIDER",defaultSettings:ra,uiComponent:Object(Xt.b)((function(e,t){var n=e.mathSymbols,r=e.sliderValues,a=e.evalErrors,i=t.id,o=n[i];return{name:o.name,value:r[i],manualValue:o.value,min:o.min,max:o.max,ownEvalErrors:a[i],isAnimating:o.isAnimating,speedMultiplier:o.speedMultiplier}}),(function(e){return{setProperty:function(t,n,r,a){return e(re(t,n,r,a))},setError:function(t,n,r){return e(te(t,n,r))},setSliderValue:function(t,n,r){if(e(function(e,t){return{type:"SET_SLIDER_VALUE",payload:{id:e,value:t}}}(t,n)),r){var a=new K;e(ae(t,"VARIABLE_SLIDER","value",null,a))}}}}))(ja)});var Ca=Object(In.a)((function(e,t,n){var r={symbols:{},idsByName:{},allSymbolIds:Object.keys(t)},a=new Set;return Object.keys(t).reduce((function(r,i){var o,s=t[i],c=s.name,l=s.value,u=s.type,d=null===l&&u===xa.type?"".concat(c,"=").concat(n[i]):"".concat(c,"=").concat(l);try{o=e.parse(d).name}catch(p){return r}return a.has(o)?(delete r.symbols[o],delete r.idsByName[o]):(a.add(o),r.symbols[o]=d,r.idsByName[o]=i),r}),r)})),wa={setError:te},ka=Object(Xt.b)((function(e,t){var n=e.mathSymbols,r=e.sliderValues,a=Ca(t.parser,n,r),i=a.symbols,s=a.idsByName,c=a.allSymbolIds,l=t.scopeEvaluator.evalScope(i);return window.evaluationResult=l,Object(o.a)({idsByName:s,allSymbolIds:c},l)}),wa)(ta),Pa=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).onToggleVisibility=function(){var t=e.props,n=t.id,r=t.type;e.props.toggleProperty(n,r,"visible")},e.onPickColor=function(t){var n=e.props,r=n.id,a=n.type;e.props.setProperty(r,a,"color",t)},e.renderStatusSymbol=function(t){var n,a=t.scope,i=e.props,o=i.calculatedVisibility,s=i.useCalculatedVisibility,c=i.visible,l=i.parser;if(s&&""!==o)try{n=Boolean(l.parse(o).eval(a))}catch(u){n=c}else n=c;return r.createElement(Qr,{extraTabs:e.props.extraTabs,colors:e.props.colors,color:e.props.color,isFilled:n,onToggleVisibility:e.onToggleVisibility,onPickColor:e.onPickColor})},e}return Object(f.a)(n,[{key:"render",value:function(){return r.createElement(na,null,this.renderStatusSymbol)}}]),n}(r.PureComponent);Pa.defaultProps={parser:$n};var Ta={toggleProperty:ne,setProperty:re},Sa=Object(Xt.b)((function(e,t){var n=e.mathGraphics[t.id];return{color:n.color,visible:n.visible,useCalculatedVisibility:n.useCalculatedVisibility,calculatedVisibility:n.calculatedVisibility,type:n.type}}),Ta)(Pa);function Aa(){var e=Object(y.a)(["\n  width:30px;\n  height:30px;\n  display:flex;\n  justify-content:center;\n  align-items:center;\n  font-size:150%;\n  color: ",";\n"]);return Aa=function(){return e},e}var Ra=Object(g.c)(V)(Aa(),(function(e){return e.theme.gray[5]}));function Va(e){return a.a.createElement(Ra,e,a.a.createElement(O.a,{type:"setting"}))}function Ia(){var e=Object(y.a)(["\n  width:30px;\n  height:30px;\n"]);return Ia=function(){return e},e}function Da(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return Da=function(){return e},e}var _a=g.c.div(Da()),Na=Object(g.c)(V)(Ia()),Ma=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isVisible:!1},e.handleVisibleChange=function(t){e.setState({isVisible:t})},e.closePopover=function(){e.setState({isVisible:!1})},e}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(zr.a,{content:this.props.children,title:a.a.createElement(_a,null,a.a.createElement("h3",null,this.props.title),a.a.createElement(Na,{onClick:this.closePopover},a.a.createElement(O.a,{type:"close"}))),trigger:"click",placement:"right",visible:this.state.isVisible,onVisibleChange:this.handleVisibleChange},a.a.createElement(Va,null))}}]),n}(r.PureComponent),La=n(945);function Fa(){var e=Object(y.a)(["\n  color: ",";\n  justify-self: end;\n  text-align: justify;\n  direction: rtl;\n"]);return Fa=function(){return e},e}function za(){var e=Object(y.a)(["\n  display: grid;\n  grid-template-columns: minmax(100px, 1fr) minmax(100px, 1fr);\n  grid-gap: 10px;\n"]);return za=function(){return e},e}var Ua=g.c.div(za()),Ba=g.c.span(Fa(),(function(e){return e.theme.gray[6]})),Ha={width:40},Ga=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).renderRow=r.renderRow.bind(Object(m.a)(r)),r.renderInput=r.renderInput.bind(Object(m.a)(r)),r}return Object(f.a)(n,[{key:"renderRow",value:function(e){var t=e.property,n=e.label,a=e.inputType,i=e.allowEmpty;return r.createElement(r.Fragment,{key:t},r.createElement(Ba,null,n),this.renderInput(t,a,i))}},{key:"renderInput",value:function(e,t,n){var a=this;switch(t){case"text":return r.createElement(La.a,{value:this.props.data[e],onChange:function(t){return a.props.setProperty(e,t.currentTarget.value)}});case"boolean":return r.createElement(Or.a,{style:Ha,size:"small",checked:this.props.data[e],onChange:function(t){return a.props.setProperty(e,t)}});case"math":return r.createElement(yr,{size:"small",allowEmpty:n,parentId:this.props.parentId,field:e});default:throw Error("Settings inputType: ".concat(t," not recognized"))}}},{key:"render",value:function(){return r.createElement(Ua,null,this.props.settingsList.map(this.renderRow))}}]),n}(r.PureComponent),Xa=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).setProperty=r.setProperty.bind(Object(m.a)(r)),r}return Object(f.a)(n,[{key:"setProperty",value:function(e,t){var n=this.props.parentId,r=this.props.data.type;this.props.setProperty(n,r,e,t)}},{key:"render",value:function(){return r.createElement(Ma,{title:this.props.title},r.createElement(Ga,{settingsList:this.props.settingsList,data:this.props.data,parentId:this.props.parentId,setProperty:this.setProperty}))}}]),n}(r.PureComponent),Za={setProperty:re},Wa=Object(Xt.b)((function(e,t){var n=e.mathGraphics,r=e.mathSymbols,a=t.parentId;return{data:n[a]?n[a]:r[a]}}),Za)(Xa);function Ya(){var e=Object(y.a)(["\n  /* guarantee that settings has room to display */\n  max-width: calc(100% - 30px);\n  overflow-x: ",";\n  flex: 1;\n"]);return Ya=function(){return e},e}var qa=g.c.div(Ya(),(function(e){return e.showOverflow?"visible":"hidden"})),Ja=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e,t=void 0===this.props.settingsTitle?"".concat(vt(this.props.type)," Settings"):this.props.settingsTitle,n=this.props.sidePanelContent||r.createElement(Sa,{id:this.props.id});return r.createElement(Jt,{isDeleteable:this.props.isDeleteable,id:this.props.id,type:this.props.type,sidePanelContent:n},r.createElement(Pr,null,r.createElement(qa,{showOverflow:this.props.isActive},this.props.children),r.createElement(Wa,{title:t,parentId:this.props.id,settingsList:(e=this.props.metadata,Object.keys(e).filter((function(t){return!e[t].isPrimary})).sort().map((function(t){var n=e[t],r=n.inputType,a=n.label;return{property:t,inputType:r,label:void 0===a?t:a,allowEmpty:n.allowEmpty}})))})))}}]),n}(r.PureComponent),$a={toggleProperty:ne,setProperty:re},Ka=Object(Xt.b)((function(e,t){var n=e.activeObject,r=e.mathGraphics,a=(e.parseErrors,e.evalErrors,t.id);return{color:r[a].color,visible:r[a].visible,isActive:n===a}}),$a)(Ja),Qa=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Ka,{type:"POINT",id:this.props.id,metadata:rn},a.a.createElement(Pr,null,a.a.createElement(yr,{parentId:this.props.id,field:"coords"})))}}]),n}(r.PureComponent),ei=new Ot({type:"POINT",metadata:rn,uiComponent:Qa,mathboxComponent:st}),ti=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Ka,{type:"LINE",id:this.props.id,metadata:sn},a.a.createElement(Pr,null,a.a.createElement(yr,{parentId:this.props.id,field:"coords"})))}}]),n}(r.PureComponent),ni=new Ot({type:"LINE",metadata:sn,uiComponent:ti,mathboxComponent:ct}),ri=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Ka,{type:"VECTOR",id:this.props.id,metadata:cn},a.a.createElement(Pr,null,a.a.createElement(yr,{parentId:this.props.id,field:"components"})))}}]),n}(r.PureComponent),ai=new Ot({type:"VECTOR",metadata:cn,uiComponent:ri,mathboxComponent:lt}),ii={flex:0},oi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Ka,{type:"AXIS",id:this.props.id,metadata:en,isDeleteable:!1},a.a.createElement(Pr,null,a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Direction:"),a.a.createElement(gr,{parentId:this.props.id,field:"axis"})),a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Min:"),a.a.createElement(yr,{field:"min",parentId:this.props.id,style:ii})),a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Max:"),a.a.createElement(yr,{field:"max",parentId:this.props.id,style:ii}))))}}]),n}(r.PureComponent),si=new Ot({type:"AXIS",metadata:en,uiComponent:oi,mathboxComponent:it});function ci(){var e=Object(y.a)(["\n  padding-left:5px;\n  padding-right:5px;\n"]);return ci=function(){return e},e}function li(){var e=Object(y.a)(["\n  display: flex;\n  flex: 1;\n  align-items:center;\n"]);return li=function(){return e},e}var ui=g.c.div(li()),di=g.c.span(ci()),pi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Ka,{type:"GRID",id:this.props.id,metadata:tn,isDeleteable:!1},a.a.createElement(Pr,null,a.a.createElement(ui,null,a.a.createElement(di,null,"Axes:"),a.a.createElement(gr,{parentId:this.props.id,field:"axes"}))))}}]),n}(r.PureComponent),hi=new Ot({type:"GRID",metadata:tn,uiComponent:pi,mathboxComponent:ot}),fi={justifyContent:"flex-end"},mi={flex:0},vi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Ka,{type:"PARAMETRIC_CURVE",id:this.props.id,metadata:ln},a.a.createElement(Pr,null,a.a.createElement(yr,{field:"expr",prefix:"_f(t)=",parentId:this.props.id})),a.a.createElement(Pr,{style:fi},a.a.createElement(Vn,{latex:"t\\in",size:"small"}),a.a.createElement(yr,{size:"small",parentId:this.props.id,field:"range",style:mi})))}}]),n}(r.PureComponent),bi=new Ot({type:"PARAMETRIC_CURVE",description:"Parametric Curve",metadata:ln,uiComponent:vi,mathboxComponent:ut});function yi(){var e=Object(y.a)(["\n  flex:1;\n  ",";\n  background-color: ",";\n  height:10px;\n"]);return yi=function(){return e},e}function gi(){var e=Object(y.a)(["\n  display:flex;\n  align-items:center;\n  margin:4px;\n"]);return gi=function(){return e},e}var Oi=g.c.div(gi()),Ei=g.c.div(yi(),(function(e){return e.gradient}),(function(e){return e.color}));function ji(e){var t=e.color,n=We[t]&&We[t].css;return a.a.createElement(Oi,null,a.a.createElement(Vn,{latex:"0"}),a.a.createElement(Ei,{gradient:n,color:t}),a.a.createElement(Vn,{latex:"1"}))}var xi=Fr.a.TabPane,Ci=[].concat(Object(se.a)(Ze),Object(se.a)(Object.keys(We)));var wi=Object(Xt.b)((function(e,t){return{color:e.mathGraphics[t.id].color}}))((function(e){var t=e.id,n=e.color,r=e.labelU,i=e.labelV;return a.a.createElement(Sa,{colors:Ci,id:t,extraTabs:a.a.createElement(xi,{tab:"Color Map",key:"colorMap"},a.a.createElement(ji,{color:n}),a.a.createElement("p",null,a.a.createElement(Vn,{latex:"f(X, Y, Z, ".concat(r,", ").concat(i,")=")})),a.a.createElement(yr,{parentId:t,field:"colorExpr",prefix:"_f(X, Y, Z, ".concat(r,", ").concat(i,")=")}),a.a.createElement("p",null,"Note: The values ",a.a.createElement("strong",null,"capital")," X, Y, Z represent scaled axis coordinates, and range from 0 to 1."),a.a.createElement("p",null,a.a.createElement("em",null,"Color maps may look better with ",a.a.createElement("code",null,"shaded=false"),".")))})})),ki={justifyContent:"flex-end"},Pi={flex:0};function Ti(e){var t="_f(".concat(e,")=").length;return function(e){try{var n=$n.parse(e);if("FunctionAssignmentNode"!==n.tree.type)return e;var r=n.tree.params[0],a=e.slice(t);return $n.parse(a).dependencies.has(r)?e:a}catch(i){return e}}}function Si(e,t,n,i){var o=Ti(n),s=Ti(i);return function(r){Object(v.a)(l,r);var c=Object(b.a)(l);function l(){return Object(h.a)(this,l),c.apply(this,arguments)}return Object(f.a)(l,[{key:"render",value:function(){var r=this.props.id;return a.a.createElement(Ka,{type:e,id:r,metadata:t,sidePanelContent:a.a.createElement(wi,{id:r,labelU:n,labelV:i})},a.a.createElement(Pr,null,a.a.createElement(yr,{field:"expr",prefix:"_f(".concat(n,",").concat(i,")="),parentId:r})),a.a.createElement(Pr,{style:ki},a.a.createElement(Vn,{latex:"".concat(n,"\\in"),size:"small"}),a.a.createElement(yr,{size:"small",parentId:r,prefix:"_f(".concat(i,")="),postProcessLaTeX:s,field:"rangeU",style:Pi})),a.a.createElement(Pr,{style:ki},a.a.createElement(Vn,{latex:"".concat(i,"\\in"),size:"small"}),a.a.createElement(yr,{size:"small",parentId:r,prefix:"_f(".concat(n,")="),postProcessLaTeX:o,field:"rangeV",style:Pi})))}}]),l}(r.PureComponent)}var Ai=new Ot({type:"PARAMETRIC_SURFACE",description:"Parametric Surface",metadata:hn,uiComponent:Si("PARAMETRIC_SURFACE",hn,"u","v"),mathboxComponent:dt}),Ri=new Ot({type:"EXPLICIT_SURFACE",description:"Explicit Surface",metadata:fn,uiComponent:Si("EXPLICIT_SURFACE",fn,"x","y"),mathboxComponent:pt}),Vi=new Ot({type:"EXPLICIT_SURFACE_POLAR",description:"Explicit Surface (Polar)",metadata:mn,uiComponent:Si("EXPLICIT_SURFACE_POLAR",mn,"r","\\theta"),mathboxComponent:ht}),Ii={justifyContent:"flex-end"},Di={flex:0},_i=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Ka,{type:"IMPLICIT_SURFACE",id:this.props.id,metadata:bn},a.a.createElement(Pr,null,a.a.createElement(yr,{field:"lhs",prefix:"_f(x,y,z)=",parentId:this.props.id}),a.a.createElement(Vn,{latex:"="}),a.a.createElement(yr,{field:"rhs",prefix:"_f(x,y,z)=",parentId:this.props.id})),a.a.createElement(Pr,{style:Ii},a.a.createElement(Vn,{latex:"x\\in",size:"small"}),a.a.createElement(yr,{size:"small",parentId:this.props.id,field:"rangeX",style:Di})),a.a.createElement(Pr,{style:Ii},a.a.createElement(Vn,{latex:"y\\in",size:"small"}),a.a.createElement(yr,{size:"small",parentId:this.props.id,field:"rangeY",style:Di})),a.a.createElement(Pr,{style:Ii},a.a.createElement(Vn,{latex:"z\\in",size:"small"}),a.a.createElement(yr,{size:"small",parentId:this.props.id,field:"rangeZ",style:Di})))}}]),n}(r.PureComponent),Ni=new Ot({type:"IMPLICIT_SURFACE",description:"Implicit Surface",metadata:bn,uiComponent:_i,mathboxComponent:ft,support:"experimental"}),Mi={justifyContent:"flex-end"},Li={flex:0},Fi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Ka,{type:"VECTOR_FIELD",id:this.props.id,metadata:yn},a.a.createElement(Pr,null,a.a.createElement(yr,{field:"expr",prefix:"_f(x,y,z)=",parentId:this.props.id})),a.a.createElement(Pr,{style:Mi},a.a.createElement(Vn,{latex:"x\\in",size:"small"}),a.a.createElement(yr,{size:"small",parentId:this.props.id,field:"rangeX",style:Li})),a.a.createElement(Pr,{style:Mi},a.a.createElement(Vn,{latex:"y\\in",size:"small"}),a.a.createElement(yr,{size:"small",parentId:this.props.id,field:"rangeY",style:Li})),a.a.createElement(Pr,{style:Mi},a.a.createElement(Vn,{latex:"z\\in",size:"small"}),a.a.createElement(yr,{size:"small",parentId:this.props.id,field:"rangeZ",style:Li})))}}]),n}(r.PureComponent),zi=new Ot({type:"VECTOR_FIELD",description:"Vector Field",metadata:yn,uiComponent:Fi,mathboxComponent:mt});var Ui,Bi=[Nr,si,hi,ei,ni,ai,bi,Ai,Ri,Vi,Ni,zi].reduce((function(e,t){return e[t.type]=t,e}),{}),Hi=new ce({type:"VARIABLE",defaultSettings:{type:"VARIABLE",name:"f(x)",value:"e^x",description:"Variable or Function"},uiComponent:function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Jt,{id:this.props.id,type:"VARIABLE"},a.a.createElement(Pr,null,a.a.createElement(mr,{parentId:this.props.id}),a.a.createElement(Vn,{latex:"="}),a.a.createElement(yr,{field:"value",parentId:this.props.id})))}}]),n}(r.PureComponent)}),Gi={type:"BOOLEAN_VARIABLE",name:"switch",value:!0,description:"Toggle Switch"},Xi=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){e.props.setProperty(e.props.id,"BOOLEAN_VARIABLE","value",t)},e}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Jt,{id:this.props.id,type:"BOOLEAN_VARIABLE"},a.a.createElement(Pr,null,a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Name:"),a.a.createElement(mr,{parentId:this.props.id})),a.a.createElement(Tr,null,a.a.createElement(Sr,null,"Value:"),a.a.createElement(Or.a,{checkedChildren:"On",unCheckedChildren:"Off",checked:this.props.value,onChange:this.onChange}))))}}]),n}(r.PureComponent),Zi={setProperty:re},Wi=new ce({type:"BOOLEAN_VARIABLE",defaultSettings:Gi,uiComponent:Object(Xt.b)((function(e,t){return{value:e.mathSymbols[t.id].value}}),Zi)(Xi)}),Yi=(Ui={},Object(u.a)(Ui,Hi.type,Hi),Object(u.a)(Ui,xa.type,xa),Object(u.a)(Ui,Wi.type,Wi),Ui);function qi(){var e=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition-duration: ",";\n  &.collapsed {\n    transform: rotate(-90deg);\n  }\n"]);return qi=function(){return e},e}function Ji(){var e=Object(y.a)(["\n  padding-left: 2px;\n  padding-right: 2px;\n  width:28px;\n  height:28px;\n"]);return Ji=function(){return e},e}var $i=Object(g.c)(V)(Ji()),Ki=g.c.span(qi(),(function(e){return"".concat(e.animationSpeed,"ms")}));function Qi(e){var t=e.isCollapsed?"collapsed":"";return a.a.createElement($i,{onClick:e.onToggleContentCollapsed,lightenOnHover:e.lightenOnHover,backgroundColor:e.backgroundColor,focusColor:St.gray[6]},a.a.createElement(Ki,{className:t,animationSpeed:e.animationSpeed},a.a.createElement(O.a,{type:"down"})))}var eo=n(362),to=n.n(eo),no=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).onToggleContentCollapsed=r.props.onToggleContentCollapsed.bind(Object(m.a)(r),r.props.id),r}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isCollapsed?"collapsed":"";return a.a.createElement(Jt,{id:e.id,type:Yt,isFolder:!0,sidePanelContent:a.a.createElement(Qi,{isCollapsed:e.isCollapsed,onToggleContentCollapsed:this.onToggleContentCollapsed,animationSpeed:e.animationSpeed,lightenOnHover:e.isActive,backgroundColor:e.isActive?At.primary[1]:"white"})},a.a.createElement(to.a,{open:!e.isCollapsed,transitionTime:e.animationSpeed,overflowWhenOpen:"visible"},a.a.createElement(he,{className:t,droppableType:"FOLDER_ITEM",draggableType:"FOLDER_ITEM",isDropDisabled:e.isCollapsed||e.isDropDisabled,droppableId:e.id,items:e.items,renderItem:ao})))}}]),n}(r.PureComponent);no.defaultProps={animationSpeed:200,isDropDisabled:!1};var ro=Object(o.a)(Object(o.a)({},Yi),Bi);function ao(e){var t=e.id,n=e.type,r=ro[n].uiComponent;return a.a.createElement(r,{id:t})}var io=new Set(["AXIS","GRID"]),oo=lr()((function(e,t){return e.mathGraphics}),(function(e,t){return e.mathSymbols}),(function(e,t){return e.sortableTree[t]}),(function(e,t,n){return n.map((function(n){var r=function(e,t,n){if(e[n])return e[n].type;if(t[n])return t[n].type;throw Error("Folder child item ".concat(n," is not a mathGraphic or mathSymbols variable"))}(e,t,n);return{id:n,type:r,isDragDisabled:io.has(r)}}))}))((function(e,t){return t})),so={onToggleContentCollapsed:function(e){return ne(e,Yt,"isCollapsed")}},co=new function e(t){Object(h.a)(this,e),this.reducer="folders",t.support||(t.support="full"),Object.assign(this,t)}({type:Yt,defaultSettings:{isCollapsed:!1,isDropDisabled:!1,isDragDisabled:!1,description:"Folder"},uiComponent:Object(Xt.b)((function(e,t){return{items:oo(e,t.id),isCollapsed:e.folders[t.id].isCollapsed,isActive:e.activeObject===t.id,isDropDisabled:e.folders[t.id].isDropDisabled}}),so)(no)}),lo=Object(o.a)(Object(o.a)(Object(u.a)({},co.type,co),Yi),Bi),uo=lo;window.MathObjects=lo;var po=n(44),ho=n.n(po);function fo(e,t,n){var r=Object(se.a)(e),a=r.splice(t,1),i=Object(oe.a)(a,1)[0];return r.splice(n,0,i),r}ho.a.extend("$reOrder",(function(e,t){return fo.apply(void 0,[t].concat(Object(se.a)(e)))}));var mo={root:[]},vo={};var bo={title:"Untitled",versionAtCreation:"1.2.8",creationDate:JSON.stringify(new Date)},yo={};function go(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yo,n=arguments.length>1?arguments[1]:void 0,r=n.name,a=n.type,i=n.payload;if(!e.has(r))return t;switch(a){case"CREATE_MATH_OBJECT":var s=Object(o.a)(Object(o.a)({},uo[r].defaultSettings),i.settings);return ho()(t,{$merge:Object(u.a)({},i.id,s)});case"DELETE_MATH_OBJECT":return ho()(t,{$unset:[i.id]});case"TOGGLE_PROPERTY":return ho()(t,Object(u.a)({},i.id,{$toggle:[i.property]}));case"SET_PROPERTY_AND_ERROR":case"SET_PROPERTY":return ho()(t,Object(u.a)({},i.id,Object(u.a)({},i.property,{$set:i.value})));case"UNSET_PROPERTY":return ho()(t,Object(u.a)({},i.id,{$unset:[i.property]}));default:return t}}}var Oo=go(new Set([co.type])),Eo=go(new Set(Object.keys(Yi))),jo=go(new Set(Object.keys(Bi)));var xo=new(function(){function e(){Object(h.a)(this,e),this._lastId=0}return Object(f.a)(e,[{key:"next",value:function(){return this._lastId+=1,String(this._lastId)}},{key:"setNextId",value:function(e){this._lastId=e-1}}]),e}()),Co={setup:["cameraFolder","axes"],cameraFolder:["camera"],axes:["axis-x","axis-y","axis-z","grid-xy","grid-yz","grid-zx"]},wo={metaData:{},sortableTree:Object(o.a)(Object(o.a)({},Co),{},{root:["mainFolder"],mainFolder:[]}),folders:{cameraFolder:{isCollapsed:!0,isDropDisabled:!0,isDragDisabled:!0,description:"Camera Controls"},axes:{isCollapsed:!1,isDropDisabled:!0,isDragDisabled:!0,description:"Axes and Grids"},mainFolder:{description:"A Folder"}},mathSymbols:{},mathGraphics:{camera:{type:"CAMERA"},"axis-x":{type:"AXIS",label:"x"},"axis-y":{type:"AXIS",label:"y",axis:"y"},"axis-z":{type:"AXIS",label:"z",axis:"z",scale:"1/2"},"grid-xy":{type:"GRID",axes:"xy"},"grid-yz":{type:"GRID",visible:!1,axes:"yz"},"grid-zx":{type:"GRID",visible:!1,axes:"zx"}},sliders:{}},ko=JSON.parse(JSON.stringify(wo));ko.mathGraphics[1]={type:"EXPLICIT_SURFACE",color:"rainbow"},ko.sortableTree.mainFolder.push("1");var Po=wo;function To(e){return 0===Object.keys(e).length&&e.constructor===Object}function So(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return Object.keys(e).reduce((function(r,a){return(e[a]!==t[a]||n.has(a))&&(r[a]=e[a]),r}),{})}function Ao(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set(["type"]);return Object.keys(e).reduce((function(a,i){var s=e[i],c=n?Yt:s.type,l=uo[c].defaultSettings,u=So(s,t[i]?Object(o.a)(Object(o.a)({},l),t[i]):l,r),d=n?Object.keys(u).length>0:Object.keys(u).length>1;return(void 0===t[i]||d)&&(a[i]=u),a}),{})}function Ro(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(o.a)(Object(o.a)({},t),e);return Object.keys(r).reduce((function(e,a){var i=r[a],s=n?Yt:i.type,c=uo[s].defaultSettings,l=t[a]?Object(o.a)(Object(o.a)({},c),t[a]):c;return e[a]=Object(o.a)(Object(o.a)({},l),i),e}),{})}function Vo(e,t){var n=Ao(e,Po.folders,!0);return Object.fromEntries(Object.entries(n).filter((function(e){var t=Object(oe.a)(e,2);t[0];return!To(t[1])})))}function Io(e){var t=e.metadata,n=e.sortableTree,r=e.folders,a=e.mathSymbols,i=e.mathGraphics,o=e.sliderValues,s=Object.keys(n).reduce((function(e,t){return void 0===Co[t]&&(e[t]=n[t]),e}),{}),c=new Set(["versionAtCreation"]),l={metadata:So(t,bo,c),sortableTree:s,folders:Vo(r),mathSymbols:Ao(a,Po.mathSymbols),mathGraphics:Ao(i,Po.mathGraphics),sliderValues:o};return Object.fromEntries(Object.entries(l).filter((function(e){var t=Object(oe.a)(e,2);t[0];return!To(t[1])})))}function Do(e){var t=e.metadata,n=e.sortableTree,r=e.folders,a=e.mathSymbols,i=e.mathGraphics,s=e.sliderValues,c=Object(o.a)(Object(o.a)({},Co),n),l=function(e,t,n){var r=e.root,a=Object.fromEntries(r.map((function(e){return[e,{}]})));return Ro(Object(o.a)(Object(o.a)({},a),t),Po.folders,!0)}(c,r),u=Ro(a,Po.mathSymbols),d=Ro(i,Po.mathGraphics),p={activeObject:null,metadata:Object(o.a)(Object(o.a)({},bo),t),sortableTree:c,sliderValues:s,folders:l,mathSymbols:u,mathGraphics:d,parseErrors:{},evalErrors:{},renderErrors:{}};Object.keys(u).concat(Object.keys(d)).forEach((function(e){p.parseErrors[e]={},p.evalErrors[e]={},p.renderErrors[e]={}}));var h=function(e){var t=0;return e.root.forEach((function(n){var r=parseInt(n,10);r>t&&(t=r),e[n].forEach((function(e){var n=parseInt(e,10);n>t&&(t=n)}))})),t}(c);return xo.setNextId(h+1),p}function _o(e){return{type:"LOAD_STATE",payload:{state:Do(e)}}}var No={state:{}},Mo={};function Lo(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mo,n=arguments.length>1?arguments[1]:void 0,r=n.type,a=n.payload,i=n.name;switch(r){case"SET_ERROR":var o=a.id,s=a.property,c=a.errorData,l=c.type,d=c.errorMsg;return e.has(l)?ho()(t,Object(u.a)({},o,Object(u.a)({},s,{$set:d}))):t;case"UNSET_ERROR":var p=a.id,h=a.property,f=a.errorData.type;return e.has(f)?ho()(t,Object(u.a)({},p,{$unset:[h]})):t;case"CREATE_MATH_OBJECT":var m=a.id;return i===Yt?t:ho()(t,Object(u.a)({},m,{$set:{}}));case"DELETE_MATH_OBJECT":var v=a.id;return ho()(t,{$unset:[v]});default:return t}}}var Fo=Lo(new Set(["PARSE_ERROR"])),zo=Lo(new Set(["EVAL_ERROR"])),Uo=Lo(new Set(["RENDER_ERROR"])),Bo=Object(i.c)({metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE":var n=t.payload.title;return Object(o.a)(Object(o.a)({},e),{},{title:n});case"SET_CREATION_DATE":var r=t.payload.creationDate;return Object(o.a)(Object(o.a)({},e),{},{creationDate:r});default:return e}},drawers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_VISIBILITY":return Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},r.id,Object(o.a)(Object(o.a)({},e[r.id]),{},{isVisible:r.isVisible})));case"SET_ANIMATION_STATUS":return Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},r.id,Object(o.a)(Object(o.a)({},e[r.id]),{},{isAnimating:r.isAnimating})));case"SET_WIDTH":var a=r.id,i=r.width;return Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},a,Object(o.a)(Object(o.a)({},e[a]),{},{width:i})));default:return e}},tabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_ACTIVE_TAB":var a=r.id,i=r.activeTab;return Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},a,{activeTab:i}));case"CREATE_MATH_OBJECT":return"1"===e.controls.activeTab?e:Object(o.a)(Object(o.a)({},e),{},{controls:{activeTab:"1"}});default:return e}},sortableTree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mo,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=t.name;switch(n){case"REORDER_WITHIN_DROPPABLE":var i=r.source,s=r.destination;return ho()(e,Object(u.a)({},i.droppableId,{$reOrder:[i.index,s.index]}));case"DRAG_TO_NEW_DROPPABLE":var c,l=r.source,d=r.destination,p=r.draggableId;return ho()(e,(c={},Object(u.a)(c,l.droppableId,{$splice:[[l.index,1]]}),Object(u.a)(c,d.droppableId,{$splice:[[d.index,0,p]]}),c));case"DELETE_MATH_OBJECT":var h=r.parentId,f=r.positionInParent;return ho()(e,Object(u.a)({},h,{$splice:[[f,1]]}));case"CREATE_MATH_OBJECT":var m=r.parentFolderId,v=r.positionInFolder,b=r.id,y=a===co.type?{$merge:Object(u.a)({},b,[])}:{};return ho()(e,Object(o.a)(Object(u.a)({},m,{$splice:[[v,0,b]]}),y));default:return e}},folders:Oo,mathGraphics:function(e,t){var n=t.name,r=t.type,a=t.payload,i=jo(e,t);if("SET_PROPERTY"!==r&&"TOGGLE_PROPERTY"!==r)return i;var o=a.property;if("visible"===o)return ho()(i,Object(u.a)({},a.id,{useCalculatedVisibility:{$set:!1}}));if("calculatedVisibility"===o)return ho()(i,Object(u.a)({},a.id,{useCalculatedVisibility:{$set:!0}}));if("BOOLEAN_VARIABLE"===n){for(var s=0,c=Object.keys(i);s<c.length;s++){var l=c[s];"null"!==i[l].calculatedVisibility&&(i[l].useCalculatedVisibility=!0)}return i}return i},mathSymbols:Eo,parseErrors:Fo,evalErrors:zo,renderErrors:Uo,sliderValues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vo,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_SLIDER_VALUE":var a=r.id,i=r.value;return Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},a,i));case"CREATE_MATH_OBJECT":if("VARIABLE_SLIDER"!==t.name)return e;var s=r.id;return Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},s,0));default:return e}},activeObject:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_ACTIVE_OBJECT":return r.id;default:return e}},lastSavedState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:No,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_SAVED_STATE":return r.state;default:return e}}});var Ho=[n(363).a],Go=i.d.apply(void 0,[i.a.apply(void 0,Ho)].concat([])),Xo=Object(i.e)(Object(J.enableBatching)((function(e,t){if("LOAD_STATE"===t.type){e.lastSavedState;var n=Object(s.a)(e,["lastSavedState"]),r=Object(o.a)(Object(o.a)({},n),t.payload.state),a=l()(r);return Object(o.a)(Object(o.a)({},r),{},{lastSavedState:a})}return Bo(e,t)})),Do(ko),Go),Zo=n(15);n(793);function Wo(){var e=Object(y.a)(["\n  display:flex;\n  height:100%;\n"]);return Wo=function(){return e},e}var Yo=g.c.div(Wo()),qo={onOpen:Y,onClose:W},Jo=Object(Xt.b)((function(e,t){var n=e.drawers;return{isOpen:n[t.id].isVisible,isAnimating:n[t.id].isAnimating,width:n[t.id].width}}),qo)(H);function $o(){var e=Object(y.a)(["\n  width:100%;\n  border-bottom: 1px solid ",";\n"]);return $o=function(){return e},e}var Ko=co.uiComponent,Qo=Object(g.c)(he)($o(),(function(e){return e.theme.gray[5]}));function es(e,t){return e.map((function(e){return{id:e,isDragDisabled:t[e].isDragDisabled}}))}var ts=Object(Xt.b)((function(e,t){var n=e.sortableTree,r=e.folders;return{items:es(n[t.root],r)}}),(function(e){return{onDragEnd:function(t){var n,r;if(t.destination)return t.destination.droppableId===t.source.droppableId?e({type:"REORDER_WITHIN_DROPPABLE",payload:{source:(n=t).source,destination:n.destination,draggableId:n.draggableId}}):e({type:"DRAG_TO_NEW_DROPPABLE",payload:{source:(r=t).source,destination:r.destination,draggableId:r.draggableId}})}}}))((function(e){return a.a.createElement(le.a,{onDragEnd:e.onDragEnd},a.a.createElement(Qo,{droppableType:"FOLDER",draggableType:"FOLDER",droppableId:"root",items:e.items,renderItem:function(e){return a.a.createElement(Ko,{id:e.id})}}))})),ns=n(948),rs=n(947);function as(){var e=Object(y.a)(["\n  color: ","\n"]);return as=function(){return e},e}function is(){var e=Object(y.a)(["\n  display:inline-block;\n  border-radius:4px; /*Same as ant-d*/\n  background: linear-gradient(\n    ",",\n    ","\n    );\n  &.ant-dropdown-trigger {\n    line-height: 1.5;\n    margin-top:16px;\n    margin-bottom:16px;\n    margin-right:16px;\n  };\n"]);return is=function(){return e},e}function os(){var e=Object(y.a)(["\n  font-weight: bold;\n  &.ant-btn, &.ant-btn:hover, &.ant-btn:focus {\n    padding-left: 20px;\n    padding-right:20px;\n    background-color:rgba(0,0,0,0);\n  }\n"]);return os=function(){return e},e}var ss=Object(g.c)(da.a)(os()),cs=g.c.div(is(),(function(e){return e.theme.gray[1]}),(function(e){return e.theme.gray[4]})),ls=g.c.span(as(),(function(e){return e.theme.gray[5]})),us=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).handleMenuClick=function(t){var n=t.key,r=xo.next(),a=n===Yt?"root":e.props.targetFolder,i=n===Yt?e.props.newFolderIndex:e.props.newItemIndex;e.props.createMathObject(r,n,a,i),n!==Yt&&e.props.setContentCollapsed(e.props.targetFolder,!1),e.props.setActiveObject(r)},e.renderMenuItem=function(e){var t=e.type,n=e.description,a=e.support;return r.createElement(ns.a.Item,{key:t},n,"experimental"===a&&r.createElement(ls,null," ","( ",r.createElement(O.a,{type:"experiment"})," Unstable Feature)"))},e.renderMenu=function(){return r.createElement(ns.a,{onClick:e.handleMenuClick},e.props.menuItems.map(e.renderMenuItem))},e}return Object(f.a)(n,[{key:"render",value:function(){return r.createElement(rs.a,{overlay:this.renderMenu(),trigger:["click"]},r.createElement(cs,null,r.createElement(ss,null,r.createElement(O.a,{type:"plus"}),"Add Object")))}}]),n}(r.PureComponent),ds=new Set(["axes","cameraFolder"]);var ps={createMathObject:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:"CREATE_MATH_OBJECT",name:t,payload:{parentFolderId:n,positionInFolder:r,id:e,settings:a}}},setActiveObject:Zt,setContentCollapsed:function(e,t){return re(e,Yt,"isCollapsed",t)}},hs=Object(Xt.b)((function(e){var t=e.activeObject,n=e.sortableTree,r=n.root,a=function(e,t){if(null===t)return null;if(e[t])return ds.has(t)?null:t;var n=Wt(e,t);return ds.has(n)?null:n}(n,t);if(0===Object.keys(r).length)throw Error("root folder requires at least 1 child");var i=a||r[r.length-1];return{targetFolder:i,newFolderIndex:r.indexOf(i)+1,newItemIndex:n[i].includes(t)?n[i].indexOf(t)+1:0}}),ps)(us);function fs(){var e=Object(y.a)(["\n  flex-grow: 0;\n  flex-shrink: 0;\n  flex-basis: 0;\n  max-width:0px;\n  padding-right: calc(100vw + 400px);\n  margin-right: -100vw;\n  position: absolute;\n  bottom:0;\n  top: 65px;\n"]);return fs=function(){return e},e}function ms(){var e=Object(y.a)(["\n  overflow-x:visible;\n  height:100%;\n  pointer-events: auto;\n  flex-grow: 0;\n  flex-shrink: 0;\n  flex-basis: 1;\n  width:100%;\n  /* The z-index means that elements overflowing from ScrollingDivInner into\n  PaddingCover still trigger the current pointer events within their\n  overflowing region */\n  z-index:10;\n"]);return ms=function(){return e},e}function vs(){var e=Object(y.a)(["\n  display:flex;\n  overflow-y: scroll;\n  padding-right: 100vw;\n  margin-right: -100vw;\n  height: 100%;\n"]);return vs=function(){return e},e}var bs=g.c.div(vs()),ys=g.c.div(ms()),gs=g.c.div(fs());var Os=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).eventNames=["mousedown","mousemove","mouseup","wheel","touchstart","touchmove","touchend"],a.domElement=window.mathbox.three.controls.domElement,a.forwardEvent=function(e){!function(e,t){t.stopPropagation(),t.preventDefault();var n=new t.constructor(t.type,t);e.dispatchEvent(n)}(a.domElement,e)},a.coverRef=r.createRef(),a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.coverRef.current;if(null!==t){var n={passive:!1};this.eventNames.forEach((function(r){t.addEventListener(r,e.forwardEvent,n)}))}}},{key:"componentWillUnmount",value:function(){var e=this,t=this.coverRef.current;null!==t&&this.eventNames.forEach((function(n){t.removeEventListener(n,e.forwardEvent)}))}},{key:"render",value:function(){return r.createElement(bs,null,r.createElement(ys,null,this.props.children),r.createElement(gs,{ref:this.coverRef}))}}]),n}(r.PureComponent),Es=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){e.props.setActiveTab(e.props.id,t)},e}return Object(f.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.id,Object(s.a)(e,["id"]));return r.createElement(Fr.a,Object.assign({},t,{onChange:this.onChange}))}}]),n}(r.PureComponent),js={setActiveTab:function(e,t){return{type:"SET_ACTIVE_TAB",payload:{activeTab:t,id:e}}}},xs=Object(Xt.b)((function(e,t){return{activeKey:e.tabs[t.id].activeTab}}),js)(Es),Cs=Fr.a.TabPane;function ws(){var e=Object(y.a)(["\n  &.ant-tabs {\n    overflow: visible;\n    height: calc(100% - ","px);\n  }\n  & .ant-tabs-bar {\n    height: 65px;\n    margin-bottom: 0px;\n  }\n  & > .ant-tabs-content {\n    height: calc(100% - 65px);\n  }\n  & > .ant-tabs-content > ant-tabs-tabpane {\n    height: 100%;\n  }\n"]);return ws=function(){return e},e}var ks=new Set(["AXIS","GRID","CAMERA"]),Ps=[co.type].concat(Object(se.a)(Object.keys(Bi).filter((function(e){return!ks.has(e)})).sort()),Object(se.a)(Object.keys(Yi).sort())).map((function(e){return{type:e,description:uo[e].defaultSettings.description,support:uo[e].support}})),Ts=Object(g.c)(xs)(ws(),48),Ss=function(){return a.a.createElement(Jo,{id:"main"},a.a.createElement(Ts,{id:"controls",tabBarExtraContent:a.a.createElement(hs,{menuItems:Ps})},a.a.createElement(Cs,{tab:"Main",key:"1"},a.a.createElement(Os,null,a.a.createElement(ts,{root:"root"}))),a.a.createElement(Cs,{tab:a.a.createElement("span",null," Axes & ",a.a.createElement("br",null)," Camera"),key:"2"},a.a.createElement(Os,null,a.a.createElement(ts,{root:"setup"})))))},As=n(114),Rs=n.n(As),Vs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"resize",value:function(){var e=this.props,t=e.id,n=e.isSmall,r=e.closeDrawer,a=e.openDrawer,i=e.setWidth;n?(r(t),i(t,"290px")):(a(t),i(t,"400px"))}},{key:"componentDidUpdate",value:function(){this.resize()}},{key:"componentDidMount",value:function(){this.resize()}},{key:"render",value:function(){return null}}]),n}(a.a.PureComponent),Is={openDrawer:Y,closeDrawer:W,setWidth:function(e,t){return{type:"SET_WIDTH",payload:{id:e,width:t}}}},Ds=Object(Xt.b)(null,Is)(Rs()((function(e){return{isSmall:e.width<480}}))(Vs));function _s(){return a.a.createElement(r.Fragment,null,a.a.createElement(Ss,null),a.a.createElement(Ds,{id:"main"}))}function Ns(){var e=Object(y.a)(["\n    transition-duration: 0s;\n  "]);return Ns=function(){return e},e}function Ms(){var e=Object(y.a)(["\n  width: 100%;\n  transform: translateX(",");\n  transition-duration: 1s;\n  & ","\n"]);return Ms=function(){return e},e}var Ls=g.c.div(Ms(),(function(e){return e.leftOffset}),(function(e){return!e.isAnimating&&Object(g.b)(Ns())})),Fs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).assignRef=function(t){e.ref=t},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.mathboxElement;e.parentNode.removeChild(e),this.ref.appendChild(e)}},{key:"render",value:function(){return a.a.createElement(Ls,{leftOffset:this.props.leftOffset,ref:this.assignRef},this.props.children)}}]),n}(r.PureComponent);function zs(e){return e.drawers.main.isAnimating}function Us(e){return e.drawers.main.isVisible?"".concat(-200,"px"):"0px"}var Bs=Object(Xt.b)((function(e,t){return{leftOffset:Us(e),isAnimating:zs(e)}}))(Fs),Hs=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).handleRenderErrors=r.handleRenderErrors.bind(Object(m.a)(r)),r}return Object(f.a)(n,[{key:"handleRenderErrors",value:function(e,t,n){var r=this.props.setError;Object.keys(e).filter((function(t){return null!==e[t]})).forEach((function(n){var a=e[n].message;r(t,n,new ee(a))}));var a=this.props.renderErrors;Object.keys(a[t]).filter((function(e){return n.hasOwnProperty(e)})).filter((function(t){return!e.hasOwnProperty(t)})).forEach((function(e){r(t,e,new ee)})),Object.keys(e).filter((function(e){return a[t].hasOwnProperty(e)})).filter((function(t){return null===e[t]})).forEach((function(e){r(t,e,new ee)}))}},{key:"renderGraphic",value:function(e,t){var n=Bi[t.type].mathboxComponent,r="number"===typeof t.opacity?100*(1-t.opacity):0;return a.a.createElement(n,Object.assign({id:e,key:e,zOrder:r},t,{handleErrors:this.handleRenderErrors}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.mathGraphics,r=t.evalErrors,i=t.setError;return a.a.createElement(na,null,(function(t){var s=t.scope;t.scopeDiff;return a.a.createElement(ge,{mathbox:window.mathbox},a.a.createElement(at,{id:"rootCartesian"},e.props.order.map((function(t){var a,c=n[t],l=r[t],u=Bi[c.type].computedProps,d=(a=c,u.reduce((function(e,t){return e[t]=a[t],e}),{})),p=sa($n,d,s),h=p.evaluated;return ca(t,p.evalErrors,l,i),e.renderGraphic(t,Object(o.a)(Object(o.a)({},c),h))}))))}))}}]),n}(r.PureComponent),Gs={setError:te},Xs=Object(Xt.b)((function(e){var t=e.mathGraphics;return{mathGraphics:t,evalErrors:e.evalErrors,renderErrors:e.renderErrors,order:Object.keys(t)}}),Gs)(Hs);function Zs(){var e=Object(y.a)(["\n  display:flex;\n  height:100%;\n  overflow: hidden;\n  flex: 1;\n"]);return Zs=function(){return e},e}var Ws=g.c.div(Zs()),Ys=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement(Ws,null,a.a.createElement(Bs,{mathboxElement:window.mathboxElement},a.a.createElement(Xs,null)))}}]),n}(r.PureComponent),qs=n(950);function Js(e){var t=e.data;return a.a.createElement("ul",null,t.map((function(e,t){return a.a.createElement("li",{key:t},a.a.createElement(qs.a,{to:"/".concat(e.id)},e.title),e.description)})))}var $s=[{id:"sliders_intro",title:"Using Variable Sliders"},{id:"sliders_plotrange",title:"Using Sliders to Animate Plot Range"},{id:"color_and_visibility",title:"Color and Visibility"},{id:"vectors",title:"Vectors and Vector Tails"},{id:"labels",title:"Labeling Points, Vectors, and Lines"},{id:"functions",title:"Using Functions"},{id:"derivatives",title:"diff: Using Derivatives"},{id:"calculated_visibility",title:"Controlling Multiple Object Visibility with Toggles"},{id:"z_bias",title:"Fine-tuning Visibility with z-bias"},{id:"tnb",title:"The TNB Vectors for Parametric Curves"},{id:"animate_camera",title:"Animating the Camera Position"}],Ks=[{id:"motion",title:"Motion: Velocity and Acceleration"},{id:"ruled_hyperboloid",title:"Ruled Hyperboloid"},{id:"horizontal_revolution_washer",title:"Surface of Revolution: Washer Method (Horizontal Axis)"},{id:"vertical_revolution_shell_method",title:"Surface of Revolution: Shell Method (Vertical Axis)"},{id:"sphere_colormap",title:"Color Maps on a Sphere"},{id:"osculating_circle",title:"Osculating Circle"}],Qs=function(e){return a.a.createElement(Jo,{id:"examples",slideTo:"right"},a.a.createElement(xs,{id:"examples"},a.a.createElement(Cs,{key:"1",tab:"Feature Demos"},a.a.createElement(Js,{data:$s})),a.a.createElement(Cs,{key:"2",tab:"Neat Examples"},a.a.createElement(Js,{data:Ks}))))},ec=n(946);function tc(e){var t=r.useState(!1),n=Object(oe.a)(t,2),a=n[0],i=n[1];function o(t){i(t),e.onVisibleChange&&e.onVisibleChange(t)}return e.useModal?r.createElement(r.Fragment,null,r.createElement(ec.a,{title:e.title,visible:a,onCancel:function(){return o(!a)},maskClosable:!0,style:{maxWidth:e.popoverMaxWidth},footer:[r.createElement(da.a,{key:"ok",onClick:function(){return o(!a)}},"OK")]},e.children),r.createElement("span",{onClick:function(){return o(!a)}},e.source)):r.createElement(zr.a,{placement:e.popoverPlacement,overlayStyle:{maxWidth:e.popoverMaxWidth},title:e.title,content:e.children,onVisibleChange:function(){return o(!a)},trigger:"click"},e.source)}tc.defaultProps={popoverPlacement:"bottomRight",popoverMaxWidth:"300px"};var nc=Rs()((function(e){return{useModal:e.width<570}}))(tc),rc=function(){var e=Object(ve.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("api/graph/".concat(t),{method:"GET",headers:{}}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ac=function(){var e=Object(ve.a)(me.a.mark((function e(t,n){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={urlKey:t,dehydrated:n},e.abrupt("return",fetch("/api/graph",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ic=n(368),oc=n.n(ic),sc=n(369),cc=function(){return{position:window.mathbox.three.camera.position.toArray(),lookAt:window.mathbox.three.controls.center.toArray()}};function lc(){var e=Object(y.a)(["\n  font-size: 125%;\n  width: 75px;\n  margin: 10px;\n  color: ",";\n  font-weight: strong;\n  visibility: ",";\n  animation: "," 100ms linear;\n"]);return lc=function(){return e},e}function uc(){var e=Object(y.a)(["\n  from { opacity: 0 }\n  to { opacity: 1 }\n"]);return uc=function(){return e},e}function dc(){var e=Object(y.a)(["\n  display: flex;\n  align-items: center;\n"]);return dc=function(){return e},e}function pc(){var e=Object(y.a)(["\n  max-width: 300px;\n  display: flex;\n  align-items: center;\n  flex-direction:column;\n"]);return pc=function(){return e},e}var hc=g.c.div(pc()),fc=g.c.div(dc()),mc=Object(g.d)(uc()),vc=g.c.div(lc(),(function(e){return e.theme.primary[4]}),(function(e){return e.isVisible?"visible":"hidden"}),(function(e){return e.isVisible?mc:""})),bc={margin:"10px"},yc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={id:null,isCopied:!1},e.saveCameraData=function(){var t=cc(),n=t.position,r=t.lookAt;e.props.setProperty("camera","CAMERA","relativePosition",n),e.props.setProperty("camera","CAMERA","relativeLookAt",r)},e.saveGraph=function(){e.saveCameraData(),e.props.setCreationDate();var t=Io(e.props.getState()),n=e.getId();ac(n,t),e.setState({id:n}),e.dehydratedJson=JSON.stringify(t)},e.onCopy=function(){e.setState({isCopied:!0})},e.onVisibleChange=function(t){t||e.setState({isCopied:!1})},e}return Object(f.a)(n,[{key:"getId",value:function(){return oc.a.generate(8)}},{key:"renderContent",value:function(){var e=this.state.id&&"".concat("https://www.math3d.org","/").concat(this.state.id);return a.a.createElement(hc,null,a.a.createElement(La.a,{readOnly:!0,value:e}),a.a.createElement(fc,null,a.a.createElement(sc.CopyToClipboard,{text:e,onCopy:this.onCopy},a.a.createElement(da.a,{type:"primary",style:bc},"Copy")),a.a.createElement(vc,{isVisible:this.state.isCopied},"Copied!")),!1)}},{key:"render",value:function(){return a.a.createElement(nc,{title:"Share your scene",onVisibleChange:this.onVisibleChange,source:a.a.createElement("span",{onPointerDown:this.saveCameraData,onClick:this.saveGraph},a.a.createElement(O.a,{type:"cloud",style:{paddingRight:"4px"}}),"Share")},this.renderContent())}}]),n}(r.PureComponent),gc={setProperty:re,setCreationDate:function(){return{type:"SET_CREATION_DATE",payload:{creationDate:JSON.stringify(new Date)}}}},Oc=Object(Xt.b)(null,gc)(yc);function Ec(){var e=Object(y.a)(["\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n"]);return Ec=function(){return e},e}var jc=g.c.span(Ec(),(function(e){return e.theme.gray[5]}),(function(e){return"brand"===e.type?"130%":"115%"}),(function(e){return"brand"===e.type?900:"default"}));function xc(){var e=Object(y.a)(["\n  background-color: rgba(0, 0, 0, 0);\n  margin-left:8px;\n  font-weight:bold;\n  padding-top:4px;\n"]);return xc=function(){return e},e}var Cc=Object(g.c)(wt)(xc());var wc={setTitle:function(e){return{type:"SET_TITLE",payload:{title:e}}}},kc=Object(Xt.b)((function(e){return{title:e.metadata.title}}),wc)((function(e){return a.a.createElement(Cc,{value:e.title,onChange:e.setTitle})}));function Pc(){var e=Object(y.a)(["\n  font-family: courier;\n  text-decoration: underline;\n"]);return Pc=function(){return e},e}function Tc(){var e=Object(y.a)(["\n  font-size:125%;\n  padding-right:5px;\n"]);return Tc=function(){return e},e}function Sc(){var e=Object(y.a)(["\n  max-width: 300px;\n  width:300px;\n"]);return Sc=function(){return e},e}function Ac(){var e=Object(y.a)(["\n  list-style-type: none;\n  padding-left:0px;\n"]);return Ac=function(){return e},e}var Rc=g.c.ul(Ac()),Vc=g.c.div(Sc()),Ic=Object(g.c)(O.a)(Tc()),Dc=g.c.span(Pc());function _c(){return a.a.createElement(nc,{title:"Help/Contact",source:a.a.createElement("span",null,a.a.createElement(O.a,{type:"question-circle",style:{paddingRight:"4px"}}),"Help/Contact")},a.a.createElement(Vc,null,a.a.createElement("p",null,"Math3d.org is a work in progress. Have a question? Suggestion? Found a bug?"),a.a.createElement("p",null,"Let us know!"),a.a.createElement(Rc,null,a.a.createElement("li",null,a.a.createElement(Ic,{type:"github"}),a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/ChristopherChudzicki/math3d-react/issues"},"Open an issue on Github.")),a.a.createElement("li",null,a.a.createElement(Ic,{type:"mail"}),"Email ",a.a.createElement(Dc,null,"math3dapp@gmail.com")))))}var Nc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onClick=function(){e.props.isVisible?e.props.closeDrawer("examples"):e.props.openDrawer("examples")},e}return Object(f.a)(n,[{key:"render",value:function(){return a.a.createElement("span",{onClick:this.onClick},a.a.createElement(O.a,{type:"bulb",style:{paddingRight:"4px"}}),"Examples")}}]),n}(r.PureComponent),Mc={openDrawer:Y,closeDrawer:W},Lc=Object(Xt.b)((function(e){return{isVisible:e.drawers.examples.isVisible}}),Mc)(Nc);function Fc(){var e=Object(y.a)(["\n  display:flex;\n  justify-content: center;\n  align-items: center;\n  width: 32px;\n  font-size: 150%;\n"]);return Fc=function(){return e},e}var zc=g.c.span(Fc()),Uc={display:"flex",backgroundColor:At.gray[1],borderBottom:"1px solid ".concat(At.gray[5])},Bc=Rs()((function(e){return{collapsed:e.width<570}}))((function(e){return e.collapsed?r.createElement(rs.a,{overlay:r.createElement(ns.a,null,e.children),trigger:["click"]},r.createElement(da.a,null,r.createElement(zc,null,r.createElement(O.a,{type:"menu-unfold"})))):r.createElement(ns.a,{style:Uc,mode:"horizontal"},e.children)}));function Hc(){var e=Object(y.a)(["\n  padding-left: 10px;\n  padding-right: 10px;\n  display:flex;\n  align-items:center;\n"]);return Hc=function(){return e},e}function Gc(){var e=Object(y.a)(["\n  background-color: ",";\n  height: ","px;\n  display:flex;\n  width:100%;\n  align-items:center;\n  justify-content: space-between;\n  border-bottom: 1pt solid ",";\n"]);return Gc=function(){return e},e}var Xc=ns.a.Item,Zc=g.c.div(Gc(),(function(e){return e.theme.gray[1]}),48,(function(e){return e.theme.gray[5]})),Wc=g.c.div(Hc()),Yc=function(){return a.a.createElement(Zc,null,a.a.createElement(Wc,null,a.a.createElement(jc,{type:"brand"},"Math3D"),a.a.createElement(kc,null)),a.a.createElement(Wc,null,a.a.createElement(Bc,null,a.a.createElement(Xc,null,a.a.createElement(Lc,null)),a.a.createElement(Xc,null,a.a.createElement(Oc,{getState:Xo.getState})),a.a.createElement(Xc,null,a.a.createElement(_c,null)))))};var qc=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.graphId&&this.props.loadGraphFromDb(this.props.graphId),this.props.setLastSavedState()}},{key:"componentDidUpdate",value:function(){this.props.graphId?this.props.loadGraphFromDb(this.props.graphId):this.props.loadDehydratedState(Po)}},{key:"render",value:function(){return a.a.createElement(Yo,{style:{overflow:"hidden",flexDirection:"column"}},a.a.createElement(Yc,null),a.a.createElement(Yo,null,a.a.createElement(_s,null),a.a.createElement(Ys,null),a.a.createElement(Qs,null)))}}]),n}(r.PureComponent),Jc={loadGraphFromDb:function(e){return function(){var t=Object(ve.a)(me.a.mark((function t(n){var r,a,i;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rc(e);case 2:if(r=t.sent,!(a=r.dehydrated)){t.next=9;break}return i=_o(a),t.abrupt("return",n(i));case 9:console.group(),console.warn("Graph ".concat(e," not found")),console.groupEnd();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},loadDehydratedState:_o,setLastSavedState:function(){return function(e,t){var n=l()(t());return e({type:"SET_SAVED_STATE",payload:{state:n}})}}},$c=Object(Xt.b)(null,Jc)(qc),Kc=n(951),Qc=n(372),el=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"legacyReRoute",value:function(e){var t=e.match;window.location="https://math3d.herokuapp.com/graph/".concat(t.params.id)}},{key:"renderGraph",value:function(e){var t=e.match;return a.a.createElement($c,{graphId:t.params.id})}},{key:"render",value:function(){return a.a.createElement(Kc.a,null,a.a.createElement(Qc.a,{exact:!0,path:"/graph/:id",render:this.legacyReRoute}),a.a.createElement(Qc.a,{exact:!0,path:"/:id",render:this.renderGraph}),a.a.createElement(Qc.a,{exact:!0,path:"/",render:this.renderGraph}))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tl=n(370),nl=n.n(tl);var rl=n(949),al=n(234);al.a.initialize("UA-131928751-1",{testMode:!1}),al.a.pageview(window.location.pathname+window.location.search),window.addEventListener("beforeunload",(function(e){var t=Xo.getState();(function(e,t){var n=new Set(["drawers","tabs","sliderValues","lastSavedState","activeObject"]);return Object.keys(e).filter((function(e){return!n.has(e)})).some((function(n){var r=t[n],a=e[n];return!nl()(a,r)}))})(t,t.lastSavedState)&&(e.preventDefault(),e.returnValue="")}));var il=document.querySelector("#root");Object(Zo.render)(a.a.createElement(Xt.a,{store:Xo},a.a.createElement(ka,{scopeEvaluator:Kn,parser:$n},a.a.createElement(g.a,{theme:At},a.a.createElement(rl.a,null,a.a.createElement(el,null))))),il),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[374,1,2]]]);
//# sourceMappingURL=main.1a6b3319.chunk.js.map